"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _this21=this,_slicedToArray=function(){function e(e,t){var i=[],a=!0,n=!1,r=undefined;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(l){n=!0,r=l}finally{try{!a&&o["return"]&&o["return"]()}finally{if(n)throw r}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}();if(!window.Promise){var polly_script=document.createElement("script");polly_script.src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.10.4/polyfill.min.js",document.head.appendChild(polly_script)}!function(e,t){function i(e){var i=t[e];t[e]=function(e){return n(i(e))}}function a(t,i,a){return(a=this).attachEvent("on"+t,function(t){(t=t||e.event).preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},i.call(a,t)})}function n(e,t){if(t=e.length)for(;t--;)e[t].addEventListener=a;else e.addEventListener=a;return e}e.addEventListener||(n([t,e]),"Element"in e?e.Element.prototype.addEventListener=a:(t.attachEvent("onreadystatechange",function(){n(t.all)}),i("getElementsByTagName"),i("getElementById"),i("createElement"),n(t.all)))}(window,document),"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(e){if("Element"in e){var t="classList",i="prototype",a=e.Element[i],n=Object,r=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[i].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},o=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(e,t)},c=function(e){for(var t=r.call(e.getAttribute("class")||""),i=t?t.split(/\s+/):[],a=0,n=i.length;a<n;a++)this.push(i[a]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},u=c[i]=[],d=function(){return new c(this)};if(o[i]=Error[i],u.item=function(e){return this[e]||null},u.contains=function(e){return-1!==l(this,e+="")},u.add=function(){var e,t=arguments,i=0,a=t.length,n=!1;do{e=t[i]+"",-1===l(this,e)&&(this.push(e),n=!0)}while(++i<a);n&&this._updateClassName()},u.remove=function(){var e,t,i=arguments,a=0,n=i.length,r=!1;do{for(e=i[a]+"",t=l(this,e);-1!==t;)this.splice(t,1),r=!0,t=l(this,e)}while(++a<n);r&&this._updateClassName()},u.toggle=function(e,t){e+="";var i=this.contains(e),a=i?!0!==t&&"remove":!1!==t&&"add";return a&&this[a](e),!0===t||!1===t?t:!i},u.toString=function(){return this.join(" ")},n.defineProperty){var p={get:d,enumerable:!0,configurable:!0};try{n.defineProperty(a,t,p)}catch(h){h.number!==undefined&&-2146823252!==h.number||(p.enumerable=!1,n.defineProperty(a,t,p))}}else n[i].__defineGetter__&&a.__defineGetter__(t,d)}}(self)),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),Array.prototype.includes||(Array.prototype.includes=function(){return-1!==Array.prototype.indexOf.apply(this,arguments)}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),i=t.length,a=new Array(i);i--;)a[i]=[t[i],e[t[i]]];return a}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var i=arguments[t];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e}),function(){function e(e,t){var i=_.app_setting_config.enable_swatch?_.app_setting_config.enable_swatch[e][t]:null;return!!i&&i.variant_swatches||i.group_swatches}function t(){_=window.vsk_data(),y=a(_),u=new L,x=_.block_collection_settings,d=!1,p=!1,b=e("home","enable_on_home_featured_product")&&"index"==x.current_template,S=_.app_setting_config.enable_swatch.home.enable_on_home_product_grid&&"index"==x.current_template,k=e("collections","enable_on_collection_quick_view")&&("collection"==x.current_template||"search"==x.current_template||"list-collections"==x.current_template||"cart"==x.current_template),A=_.app_setting_config.enable_swatch.collections.enable_on_collection_product_grid&&("collection"==x.current_template||"search"==x.current_template||"list-collections"==x.current_template||"cart"==x.current_template),I=e("products","enable_on_main_product")&&"product"==x.current_template,T=_.app_setting_config.enable_swatch.products.enable_on_product_grid&&"product"==x.current_template,C=e("pages","enable_on_custom_featured_product")&&x.current_template.includes("page"),E=_.app_setting_config.enable_swatch.pages.enable_on_custom_product_grid&&x.current_template.includes("page"),h=!1,y&&(n(),r()),w=_.money_format,g=window.Shopify&&window.Shopify.routes&&(window.Shopify.routes.root||window.Shopify.routes.root_url)||"/",0==_.published_locales.length&&console.log("SWATCH KING LANGUAGE_ERROR ::: Default langaugae is not published in this market.")}function i(e,t,i){var a=window.Shopify&&window.Shopify.theme?window.Shopify.theme.id:null;if(e[a])return e[a];console.warn("Swatch King App: Theme ID was not located in the app metafields for this theme, please contact support.");var n=window.BOOMR?window.BOOMR.themeName:null;for(var r in t){if((o=t[r]).schema_theme_names.includes(n))return o.id}var s=window.Shopify&&window.Shopify.theme?window.Shopify.theme.theme_store_id:null;for(var r in t){var o;if((o=t[r]).theme_store_ids.includes(s))return o.id}return console.warn("Swatch King App: Theme configuration not found for this theme. Currently using the published theme configuration."),i}function a(e){var t=e.theme_settings,a=e.published_theme_setting,n=e.theme_settings_map,r=null;if(t&&n){var s=i(n,t,a);if(s){if(r=t[s]){var o=e.block_collection_settings;if(o)for(var l in r.settings.collections)o[l]!=undefined&&(r.settings.collections[l]=o[l])}}else console.error("Swatch King App: Theme configuration not found for this theme, please contact support.")}return r}function n(){if(!document.querySelector('style[app="vsk"][role="custom-css"]')&&u){var e=u.getCustomStyle(),t=document.querySelector("head");e&&t.appendChild(P(e)[0])}}function r(){if(!document.querySelector('script[app="vsk"][role="custom-script"]')&&u){var e=u.getCustomScripts(),t=document.createElement("script");t.innerHTML=e,t.setAttribute("role","custom-script"),t.setAttribute("app","vsk"),t.setAttribute("type","text/javascript"),document.head.appendChild(t)}}function s(e){var t=window.location.pathname.replace(l,"");return("undefined"==typeof window[e]||window[e]!=t)&&(window[e]=t,!0)}function o(e){var t=e.toUpperCase();return"PT-BR"===t||"PT-PT"===t||"ZH-CN"===t||"ZH-TW"===t?t.replace("-","_"):t.match(/^[a-zA-Z]{2}-[a-zA-Z]{2}$/)?t.substring(0,2):t}var l=RegExp("\\/collections\\/[^\\/]*(?=\\/products)|\\/$","gi"),c="2023-10",u=undefined,d=undefined,p=undefined,h=undefined,g=undefined,v=undefined,f=undefined,m=undefined,_=(undefined,undefined),y=undefined,w=undefined,b=undefined,S=undefined,k=undefined,A=undefined,I=undefined,T=undefined,C=undefined,E=undefined,x=undefined,D=function(){function e(t,i,a){_classCallCheck(this,e),this.instanceType=t,this.currentDocument=i,this.storeSlug=window.Shopify.shop.split(".myshopify.com")[0],this.swatchDir=_.swatch_dir,this.productUndefined=!1,this.hasOnlyDefaultVariant=!1,this.hasOnlySingleVariant=!1,this.eventsRegistered=!1,this.multiLingualInfo=null,this.untranslatedData=null,this.untranslatedFetchStatus="none",this.isSectionPrimary=!1,this.instanceSubType=this.instanceType,a&&"undefined"!=typeof a.instance_sub_type&&(this.isSectionPrimary=a.primary,this.instanceSubType=a.instance_sub_type),this.setInstanceGlobals(),this.fetchInformationFromJs()}return _createClass(e,[{key:"setInstanceGlobals",value:function(){if(this.productInfoTree=new O,this.clientSpecs=new L,this.uiElements=new N(this.instanceType,this.clientSpecs,this.currentDocument),this.themeCode="common",this.themeSupportConfig={},this.selectionAllowed=!1,this.pInformation={product_switched:!1,selected_product_group:null,featured_image_src:null,secondary_image_src:null,image_replaced_by_hover:!1,first_or_available_variant:null,preselect_variant:null},this.doNotSelectAnOption=this.clientSpecs.getDoNotSelectAnOption(),this.doNotSelectAnOption.count=0,this.allOptionsData=this.clientSpecs.getAllOptionsData(),this.groupsDisplaySelector=null,this.labelSplitSymbol="-",this.isInstanceTypeProduct()){var e=this.clientSpecs.getSelectors();if(this.labelSplitSymbol=this.clientSpecs.getProductSettings().label_split_symbol,"quick_view"!=this.instanceSubType){var t=e.swatch_root.groups_selector;""!=t&&(this.groupsDisplaySelector=t)}}else this.isInstanceTypeCollection()&&(this.labelSplitSymbol=this.getInstanceSettings().label_split_symbol)}},{key:"dispatchEvent",value:function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!1),M(["Event Dispatched!!!",e,t]),t.dispatchEvent(i)}},{key:"dispatchThemeEvent",value:function(e,t,i){if(window.CustomEvent){var a=document.createEvent("CustomEvent");a.initCustomEvent(e,!0,!1,i),t.dispatchEvent(a)}}},{key:"dispatchCustomEvent",value:function(e,t,i){if(window.CustomEvent){var a=document.createEvent("CustomEvent");a.initCustomEvent("vsk:"+t,!0,!1,i),e.dispatchEvent(a)}}},{key:"getProductHandleFromScope",value:function(){var e=[];if(this.isInstanceTypeCollection()){var t=this.getInstanceConfig().data_selectors;""!=t.url&&e.push(t.url)}var i=['a[href*="/products/"]:not([href*="shopify.com"])','[data-href*="/products/"]','meta[itemprop="url"][content*="/products/"]',"[data-product-handle]",'[data-url*="/products/"]','[data-product-url*="/products/"]','[product-url*="/products/"]'];e=e.concat(i);var a=null;if(a=this.currentDocument.matches&&this.currentDocument.matches(e)?this.currentDocument:this.currentDocument.querySelector(e)){for(var n=null,r=["data-product-handle","data-url","data-product-url","product-url","content","href","data-href"],s=0;s<r.length;s++){var o=r[s];if(a.hasAttribute(o)&&a.getAttribute(o)){n=a.getAttribute(o);break}}return this.extractProductHandle(n)}return null}},{key:"isInstanceTypeProduct",value:function(){return"products"==this.instanceType}},{key:"isInstanceTypeCollection",value:function(){return"collections"==this.instanceType}},{key:"isEventTrusted",value:function(e,t){return"undefined"!=typeof e.isTrusted&&"undefined"!=typeof e.screenX&&"undefined"!=typeof e.screenY&&0==e.isTrusted&&0!=e.screenX&&0!=e.screenY||("undefined"!=typeof e.isTrusted?e.isTrusted:"undefined"!=typeof e.screenX&&"undefined"!=typeof e.screenY?0!=e.screenX&&0!=e.screenY:t)}},{key:"isClickEvent",value:function(e){return"click"==e}},{key:"extractProductHandle",value:function(e){var t=e.split("/");return(t=(t=t[t.length-1]).split(RegExp("\\?|\\#|\\.js","gi")))[0]}},{key:"setSelectMinWidth",value:function(e){var t=250;e.style.minWidth&&((t=parseInt(e.style.minWidth.split("px")[0]))||(t=250)),e.offsetWidth>t&&(t=e.offsetWidth),e.style.minWidth=t+"px"}},{key:"clickToScroll",value:function(e,t){var i=arguments.length<=2||arguments[2]===undefined||arguments[2],a='[swatch-slider="true"]';this.resSlider(e,a,t,i)}},{key:"resSlider",value:function(e,t,i,a){var n=t+" "+'[navigation="left"]',r=t+" "+'[navigation="right"]',s=JSON.parse(i.dataset.sliderData),o=".swatch-navigable ul";i.querySelector(t+""+o).style.transition=a?"0.3s ease all":"none";var l=i.querySelector(t+""+o).style.transform.match(/-?[\d\.]+/g),c=-Math.abs(l[0]);if(0==e)if("mode_0"!=s.arrowMode&&i.querySelector(r).classList.add("star-show"),i.querySelector(r).classList.remove("star-disabled"),"swatch-pill"==s.swatchType||"button"==s.assocViewType)(c+=.8*s.sliderWidth)>=-s.firstSwatchWidth/2&&(c=0,"mode_1"==s.arrowMode?setTimeout(function(){i.querySelector(n).classList.remove("star-show")},500):i.querySelector(n).classList.add("star-disabled"));else{var u=s.visibleSwatches>0?s.visibleSwatches:1;"mode_1"==s.arrowMode&&(u=s.visibleSwatches>2?s.visibleSwatches-2:1),(c+=u*(s.swatchSliderItemWidth+s.marginRight))>=-s.swatchSliderItemWidth/3&&(c=0,"mode_1"==s.arrowMode?setTimeout(function(){i.querySelector(n).classList.remove("star-show")},500):i.querySelector(n).classList.add("star-disabled"))}else if(1==e)if("mode_0"!=s.arrowMode&&i.querySelector(n).classList.add("star-show"),i.querySelector(n).classList.remove("star-disabled"),"swatch-pill"==s.swatchType||"button"==s.assocViewType){var d=c;c-=.8*s.sliderWidth,s.totalScrollWidth<=-(c-s.sliderWidth)&&(c=d+(-s.totalScrollWidth-(d-s.sliderWidth))-1,"mode_1"==s.arrowMode?setTimeout(function(){i.querySelector(r).classList.remove("star-show")},500):i.querySelector(r).classList.add("star-disabled"))}else{d=c,u=s.visibleSwatches>0?s.visibleSwatches:1;"mode_1"==s.arrowMode&&(u=s.visibleSwatches>2?s.visibleSwatches-2:1),c-=u*(s.swatchSliderItemWidth+s.marginRight),s.totalScrollWidth<=-(c-s.sliderWidth)&&(c=d+(-s.totalScrollWidth-(d-s.sliderWidth)),"mode_1"==s.arrowMode?setTimeout(function(){i.querySelector(r).classList.remove("star-show")},500):i.querySelector(r).classList.add("star-disabled"))}i.querySelector(t+""+o).style.transform="translateX("+c+"px)"}},{key:"scrollSwatchSlider",value:function(e){var t=e.closest(".swatch-navigable");"left"==e.getAttribute("data-navigation")?this.clickToScroll(0,t):this.clickToScroll(1,t)}},{key:"getCorrectSwatchRoot",value:function(){var e=this,t=arguments.length<=0||arguments[0]===undefined?"options":arguments[0],i=null,a=null,n=!1,r="bottom";if(this.isInstanceTypeProduct()){if(i="products_"+t+"_root",void 0===(a=this.pInformation[i])||!a.parentNode){var s=this.clientSpecs.getSelectors(),o=null,l="groups"==t;r=s.swatch_root.position;var c="div[data-vsk-groups-priority]",u=document.querySelector(c),d=this.productInfoTree.getProductInfo().handle,p=null;u&&(p=u.dataset.vskProductHandle),u&&p==d&&(this.groupsDisplaySelector=c),o=l&&this.groupsDisplaySelector&&this.clientSpecs.getGroupsEnableStatusForProductType()?this.groupsDisplaySelector:s.swatch_root.selector,!(a=l&&u&&p==d&&this.clientSpecs.getGroupsEnableStatusForProductType()?u:this.currentDocument.querySelector(o))&&this.currentDocument.matches&&this.currentDocument.matches(o)&&(a=this.currentDocument),n=!!a}}else this.isInstanceTypeCollection()&&(i="collections_"+t+"_root",void 0!==(a=this.pInformation[i])&&a.parentNode||function(){var t=e.getInstanceConfig(),i="bottom";a=e.currentDocument,r=i;var s=t.swatch_display_options,o=x.swatch_location;if(s){var l=-1;-1!==(l=s.findIndex(function(e){return e.label===o}))?(r=s[l].position,a=e.currentDocument.querySelector(s[l].selector)):-1!==(l=s.findIndex(function(t){return!!e.currentDocument.querySelector(t.selector)}))&&(r=s[l].position,a=e.currentDocument.querySelector(s[l].selector))}a||(r=i,a=e.currentDocument),n=!0}());if(n){var h=document.createElement("variant-swatch-king");h.style.maxWidth="100%","before"==r?a.parentNode.insertBefore(h,a):"after"==r?a.parentNode.insertBefore(h,a.nextSibling):"top"==r?a.insertBefore(h,a.firstChild):a.appendChild(h),this.pInformation[i]=h,a=h}return a}},{key:"getLabelWidth",value:function(e,t){var i=e.closest(".swatch-drop-down-label");if(i){var a=i.querySelector(".swatch-label-inside");if(a){t=parseFloat(t.match(/[\d\.]+/g));var n=a.getBoundingClientRect().width;e.style.paddingLeft=t+n+"px"}}}},{key:"setProductGroupsObject",value:function(){return v||"undefined"==typeof window.starapps_data?!v&&["lambda"].includes(this.clientSpecs.getDataUrlSource())&&(m=this.clientSpecs.getLambdaCloudFrontUrl(),v=[],f={}):(v=window.starapps_data.product_groups,f=window.starapps_data.product_groups_chart),null!=v&&v!=undefined}},{key:"getProductsGroups",value:function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i];t.push(v[a])}return t}},{key:"setProductGroupsFromAPI",value:function(e,t){e&&0!=e.length||"undefined"==typeof f[t]&&(f[t]=[]);for(var i=function(t){v.some(function(i){return i.id==e[t].id})||v.push(e[t])},a=0;a<e.length;a++)i(a);for(var n=function(e){v[e].option_values.some(function(e){return e.handle==t})&&(f[t]?f[t].some(function(t){return t==e})||f[t].push(e):f[t]=[e])},r=0;r<v.length;r++)n(r)}},{key:"getProductGroupsByAPI",value:function(e){var t,i=this,a=arguments.length<=1||arguments[1]===undefined?function(){}:arguments[1];JSON.stringify({shopify_domain:window.Shopify.shop,product_handle:e});window.fetch?fetch(m+"/store/"+this.storeSlug+"/groups/"+e+".json",{method:"GET"}).then(function(e){return e.json()}).then(function(t){i.setProductGroupsFromAPI(t,e),a&&a.call(i)}):((t=new XMLHttpRequest).open("GET",m+"/store/"+i.storeSlug+"/groups/"+e+".json",!0),t.onload=function(){if(t.status>=200&&t.status<400){var i=JSON.parse(t.responseText);this.setProductGroupsFromAPI(i,e),a&&a.call(this)}}.bind(i),t.send(null))}},{key:"getProductGroupIndexes",value:function(e){var t=f[e];return void 0!==t?t:m?null:[]}},{key:"getGroupSwatchImageURL",value:function(e,t){var i=encodeURIComponent(t);return"cdn"==this.clientSpecs.getSwatchUrlSource()&&(i=encodeURIComponent(i)),"https://"+this.clientSpecs.getSwatchUrlHost()+"/apps/"+this.swatchDir+"/"+this.storeSlug+"/groups/"+e.split("group")[1]+"/"+i+".media"}},{key:"generateProductGroups",value:function(){var e=this;if("collections"===this.instanceType?this.clientSpecs.getEnableStatusForProductGridType():"products"===this.instanceType&&this.clientSpecs.getGroupsEnableStatusForProductType())if(this.setProductGroupsObject())if(this.hasOnlyDefaultVariant||this.uiElements.getIsSwatchRootDisplayed()){var t=this.getMultiLingualInfo().translation_status;if(t&&!this.productInfoTree.getUntranslatedProductHandle())return setTimeout(this.generateProductGroups.bind(this),100),void M("Untranslated handle is not found ... calling generateProductGroups method again!");var i=t?this.productInfoTree.getUntranslatedProductHandle():this.productInfoTree.getProductInfo().handle,a=this.getProductGroupIndexes(i),n=null;if(m&&null==a)this.getProductGroupsByAPI(i,this.generateProductGroups.bind(this));else if(!((n=this.getProductsGroups(a)).length<=0)){var r=this.groupsDisplaySelector?"groups":"options",s=this.getCorrectSwatchRoot(r);this.uiElements.getIsSwatchRootDisplayed(r)||(this.isInstanceTypeProduct()?this.uiElements.renderSwatchRoot(this.uiElements.getSwatchRoot([]),s,r):this.isInstanceTypeCollection()&&this.uiElements.renderSwatchRoot(this.uiElements.getSwatchRoot([]),s));var o=s.querySelector(".swatches.swatches-type-"+this.instanceType),l={top:0,bottom:0},c={top:[],bottom:[]};Object.entries(n).forEach(function(t){var n=_slicedToArray(t,2),r=n[0],s=n[1],u="group"+s.id;if("length"!=r){for(var d=0;d<c[s.display_position].length;d++){var p=c[s.display_position][d];if(s.group_name.toString()<p.group_name.toString()){l[s.display_position]=d;break}"top"==s.display_position?l[s.display_position]=d+1:"bottom"==s.display_position&&(l[s.display_position]=-1)}var h=s.option_name?s.option_name:"",g="<div "+(e.isInstanceTypeProduct()?'id="swatch-'+u+'" ':"")+'option-name="'+(""!=h.trim()?h:"empty")+'" option-target="'+u+'" type-group="true"></div>';if("top"==s.display_position){var v=o.querySelector('[sa-group-position="top"]');v.querySelector('[option-target="'+u+'"]')||v.insertBefore(e.uiElements.parseHTML(g)[0],v.children[l.top])}else{var f=o.querySelector('[sa-group-position="bottom"]');if(!f.querySelector('[option-target="'+u+'"]')){var m=f.children.length-1-l.bottom;-1!=l.bottom?f.insertBefore(e.uiElements.parseHTML(g)[0],f.children[m]):f.append(e.uiElements.parseHTML(g)[0])}}if(!e.pInformation.selected_product_group||e.pInformation.selected_product_group!=u){var _=a[r];e.generateProductGroupsUI(_,l,o,u,s,i)}c[s.display_position].push(s)}})}}else setTimeout(this.generateProductGroups.bind(this),50);else setTimeout(this.generateProductGroups.bind(this),250)}},{key:"generateProductGroupsUI",value:function(e,t,i,a,n,r){var s=this,o=arguments.length<=6||arguments[6]===undefined?null:arguments[6],l=!1,c=n.option_name?n.option_name:"",u={available_count:0,name:this.getTranslation(c),untranslated_name:c,view_type_preset:this.clientSpecs.getViewTypeByGroup(n,this.instanceType),product_group_index:e,data:[],show_price:!1},d=0,p=this.isInstanceTypeCollection()?this.getSwatchMinifiedCount("groups"):null;if(0==p&&d++,"hidden"!=u.view_type_preset.assoc_view_type){var h=null,g=(undefined,this.getMultiLingualInfo());w?w.trim():g.money_format.trim(),h=g.current_url+"/products";var v=!1;u.view_type_preset&&"invisible"==u.view_type_preset.params.stock_out_type&&(v=!0);for(var f=n.option_values.every(function(e){return!s.getTranslatedData(e,o,"available")}),m=0;m<n.option_values.length;m++){var _=n.option_values[m],y=(this.getTranslatedData(_,o,"minPrice"),this.getTranslatedData(_,o,"maxPrice"),this.getTranslatedData(_,o,"title")),b=this.getTranslatedData(_,o,"handle"),S=_.featured_img,k=r==_.handle;if(_.available=this.getTranslatedData(_,o,"available"),null!=p&&("undefined"==typeof _.published||_.published)){if(p<=1&&!k&&(v&&_.available||!v||f)){d++;continue}!k&&(v&&_.available||!v||f)&&p--}if(("undefined"==typeof _.published||_.published)&&""!=_.handle){_.option_value&&""!=_.option_value.trim()&&(y=this.getTranslation(_.option_value));var A=undefined,I=u.view_type_preset[this.instanceType+"_swatch"];"undefined"==typeof _.available&&(_.available=!0),S||(S={src:"none"}),"object"!=typeof S&&(S={src:S}),"second_product_image"==I&&_.secondary_img?S.src=_.secondary_img:"last_product_image"==I&&_.last_img&&(S.src=_.last_img),A=_.min_price&&_.max_price?_.min_price==_.max_price?this.getMoneyWithFormat(w,100*_.min_price):this.getMoneyWithFormat(w,100*_.min_price)+"+":this.getMoneyWithFormat(w,100*_.price)+"+";var T="custom_swatch"==I;this.uiElements.isASwatch(u.view_type_preset.assoc_view_type)&&T&&(S={src:this.getGroupSwatchImageURL(a,_.handle)}),u.data.push({value:y,original_value:y,featured_image:S,available:_.available,url:h+"/"+b,selected:k,price:A}),_.available&&(u.available_count+=1),k&&(l=!0);var C=window.Shopify&&window.Shopify.currency?Shopify.currency.active:null;null!==C&&this.clientSpecs.default_currency==C&&this.clientSpecs.default_language==this.multiLingualInfo.current_language&&(u.show_price=!0)}}}var E,x,D,O="";if(O+=l?this.uiElements.getViewByType(u.view_type_preset).getView(a,u):'<input type="hidden" value="Product group hidden or current product not present."/>',i.querySelector('[option-target="'+a+'"]').appendChild(this.uiElements.parseHTML(O)[0]),"smart_hide"==this.clientSpecs.hideSingleValueOption(this.instanceType)&&(E=!1,x=null,D=i.querySelectorAll("ul.swatch-view-image, ul.swatch-view-custom-image"),Object.entries(D).forEach(function(e){var t=_slicedToArray(e,2),i=t[0],a=t[1];if("length"!=i){var n=1==a.children.length?a.closest("div[option-target]"):null;n?(n.classList.add("option-single-value"),null==x&&(x=n)):E=!0,!E&&x&&i==D.length-1&&x.classList.remove("option-single-value")}})),l){if("drop_down"==u.view_type_preset.assoc_view_type&&"label_inside"==u.view_type_preset.params.dropdown_type){var L=i.querySelectorAll("div.swatch-drop-down-inner select");Object.entries(L).forEach(function(e){var t=_slicedToArray(e,2),i=t[0],a=t[1];"length"!=i&&s.getLabelWidth(a,u.view_type_preset.params.padding_left)})}this.generateProductGroupsUIHelper(u.view_type_preset,a,i,d,u)}}},{key:"generateProductGroupsUIHelper",value:function(e,t,i,a){var n=i.querySelector('[option-target="'+t+'"] .swatch-group-selector[current-product]');if(n){if(0!=a){var r=n.closest("[option-name]").getAttribute("option-name"),s=this.uiElements.getMinifiedHTML(r,a,this.productInfoTree.getProductInfo());n.closest("ul.swatch-view").appendChild(s)}if(this.uiElements.selectSwatch(t,n,n.getAttribute("orig-value")),"select_value"==n.getAttribute("type")){var o=n.closest("div.swatch-drop-down-inner").querySelector('div[type="select"]');o.style.minWidth&&"0px"!=o.style.minWidth||this.setSelectMinWidth(o),o.innerHTML=n.innerHTML,o.setAttribute("aria-label",n.innerText),o.setAttribute("aria-expanded",!1),n.parentNode.classList.add("swatch-hide")}var l=n.closest("[option-target]"),c=l.querySelector("span.swatch-variant-name");if(c){var u=n.getAttribute("data-value"),d=l.getAttribute("option-name");c&&d&&"empty"!=d.trim()&&"none"!=u&&(c.innerHTML=' <span class="swatch-split-symbol">'+this.labelSplitSymbol+"</span> "+u)}var p=n.closest(".swatch-navigable, variant-swatch-king"),h=n.closest(".swatch-view-stack, variant-swatch-king");if(p&&"VARIANT-SWATCH-KING"!=p.tagName){var g=n.closest("ul.swatch-view"),v=n.closest("li.swatch-view-item"),f='[data-navigation="left"]',m=!!g&&v.offsetLeft>g.clientWidth;if(m&&(f='[data-navigation="right"]'),p){p.querySelector(".swatch-navigation"+f);var _=n.closest(".swatch-navigable");this.resSliderSize(_,e.params,e.assoc_view_type)}m&&(g.style.scrollBehavior="auto",g.scrollLeft=v.offsetLeft-v.offsetWidth,g.style.scrollBehavior="")}else if(h&&"VARIANT-SWATCH-KING"!=h.tagName){_=n.closest(".swatch-view-stack");this.resStackSize(_,e.params,e.assoc_view_type)}}}},{key:"getTranslatedData",value:function(e,t,i){var a='"gid://shopify/Product/'+e.id+'"';if(t&&t[a]){var n=t[a];switch(i){case"title":return n.title;case"handle":return n.handle;case"minPrice":return parseFloat(n.priceRange.minVariantPrice.amount);case"maxPrice":return parseFloat(n.priceRange.maxVariantPrice.amount);case"available":return n.availableForSale;case"featured_img":return n.featuredImage?n.featuredImage.url:null;case"secondary_img":return n.images.nodes.length>1?n.images.nodes[1].url:null;case"last_img":var r=n.images.nodes.length;return r?n.images.nodes[r-1].url:null}}return e[i]}},{key:"getInstanceConfig",value:function(){return this.clientSpecs.getCollectionConfig()}},{key:"getInstanceSettings",value:function(){return this.clientSpecs.getCollectionSettings()}},{key:"removeElement",value:function(e){e.parentNode.removeChild(e)}},{key:"generateImageURL",value:function(e,t){var i=/\.(?:jpg|png|jpeg|gif|tiff|bmp)(?:\?|\s|$)/gm,a=/(?:_\d*x\d*|_medium|_large|_small)(?:_crop_[a-zA-Z]{3,6}){0,1}(?=\.(?:jpg|png|jpeg|gif|tiff|bmp))/gm.exec(e),n=i.exec(t);return a&&n&&(t=t.replace(n[0],a[0]+n[0])),t}},{key:"updateVariantImage",value:function(e,t,i){var a=!1,n=!1,r=i?"featured_image_src":"secondary_image_src";if(i&&t.featured_image?a=!0:!i&&t.featured_image&&t.featured_image.secondary_src&&(a=!0),e&&"PICTURE"==e.tagName){for(var s=e.querySelectorAll("source"),o=0;o<s.length;o++)this.removeElement(s[o]);e=e.querySelector("img")}if(e&&a)if("IMG"==e.tagName){var l=e.getAttribute("src");if(e.currentSrc&&(l=e.currentSrc),!l&&e.hasAttribute("data-srcset")){var c=e.getAttribute("data-srcset");if((c=c.split(",")).length>1)l=c[parseInt((c.length-1)/2)].trim().split(" ")[0];else if(1==c.length){l=c[0].trim().split(" ")[0]}}this.pInformation[r]||(this.pInformation[r]=l);var u=null;u=i?this.generateImageURL(l,t.featured_image.src):this.generateImageURL(l,t.featured_image.secondary_src),e.setAttribute("src",u),e.setAttribute("srcset",u),e.setAttribute("data-srcset",u),n=!0}else{var d=/url\((\S*)\)/gm;(l=e.style.backgroundImage)||(l=e.style.background);var p=d.exec(l);if(p){l=(l=p[1]).trim(),this.pInformation[r]||(this.pInformation[r]=l);u=null;u=i?this.generateImageURL(l,t.featured_image.src):this.generateImageURL(l,t.featured_image.secondary_src),e.setAttribute("data-bgset",u),e.style.backgroundImage?e.style.backgroundImage="url("+u+")":e.style.background="url("+u+")",n=!0}}else if(e)if("IMG"==e.tagName&&this.pInformation[r]){u=this.pInformation[r];e.setAttribute("src",u),e.setAttribute("srcset",u),e.setAttribute("data-srcset",u),n=!0}else if(this.pInformation[r]){u=this.pInformation[r];e.setAttribute("data-bgset",u),e.style.backgroundImage?e.style.backgroundImage="url("+u+")":e.style.background="url("+u+")",n=!0}e&&n&&e.className.includes("lazyload")&&(e.classList.remove("lazyload"),e.classList.remove("lazyloading"),e.classList.remove("lazyloaded"),e.classList.add("lazyload"))}},{key:"formatDefaultOption",value:function(e,t){return void 0===e?t:e}},{key:"formatWithDelimiters",value:function(e,t,i,a,n){i=this.formatDefaultOption(i,2),a=this.formatDefaultOption(a,","),n=this.formatDefaultOption(n,".");var r=(t=this.formatDefaultOption(t,!!this.getInstanceSettings().price_trailing_zeroes))?n+"00":"";if(isNaN(e)||null==e)return 0;var s=(e=(e/100).toFixed(i)).split(".");return s[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+a)+(s[1]&&"00"!=s[1]?n+s[1]:r)}},{key:"insertHTMLAt",value:function(e,t,i){if("replace"!=i){var a=this.uiElements.parseHTML(e)[0];"before"==i?t.parentNode.insertBefore(a,t):"after"==i?t.parentNode.insertBefore(a,t.nextSibling):"top"==i?t.insertBefore(a,t.firstChild):t.appendChild(a)}else t.innerHTML=e}},{key:"updateGridElements",value:function(e){var t=this.getInstanceConfig().grid_updates,i=this.getGridUpdateParams(e);i.is_on_sale?this.currentDocument.classList.add("swatch-variant-onsale"):this.currentDocument.classList.remove("swatch-variant-onsale"),"undefined"!=typeof i.available&&i.available?this.currentDocument.classList.remove("swatch-variant-soldout"):this.currentDocument.classList.add("swatch-variant-soldout");for(var a=0;a<t.length;a++){var n=t[a],r=n.template?n.template.toString():null;if(""!=n.display_selector){var s=this.currentDocument.querySelector(n.display_selector);if(""!=n.element_selector){var o=this.currentDocument.querySelector(n.element_selector);o&&this.removeElement(o)}s&&(r=this.getModifiedTemplate(n.template,i),this.insertHTMLAt(r,s,n.display_position))}}}},{key:"getMoneyWithFormat",value:function(e,t){var i=RegExp("{{[^{]*amount[^}]*}}","gi"),a=RegExp("{+([^}]*)}+","i").exec(e),n="";if(a&&(a=a[1].trim()),"amount"==a){var r=this.formatWithDelimiters(t,!0,2,",",".");n=e.replace(i,r)}else if("amount_no_decimals"==a){r=this.formatWithDelimiters(t,!1,0,",",".");n=e.replace(i,r)}else if("amount_with_comma_separator"==a){r=this.formatWithDelimiters(t,!0,2,".",",");n=e.replace(i,r)}else if("amount_no_decimals_with_comma_separator"==a){r=this.formatWithDelimiters(t,!1,0,".",",");n=e.replace(i,r)}else if("amount_with_apostrophe_separator"==a){r=this.formatWithDelimiters(t,!0,2,"'",".");n=e.replace(i,r)}else if("amount_with_space_separator"==a){r=this.formatWithDelimiters(t,!0,2," ",",");n=e.replace(i,r)}else if("amount_no_decimals_with_space_separator"==a){r=this.formatWithDelimiters(t,!1,0," ",",");n=e.replace(i,r)}else{r=this.formatWithDelimiters(t,!0,2,",",".");n=e.replace(i,r)}return n}},{key:"getModifiedTemplate",value:function(e,t){var i=RegExp("{+([^}]*)}+","i");null==e&&(e="");for(var a=undefined;null!==(a=i.exec(e));){a.index===i.lastIndex&&i.lastIndex++;var n=a[1].trim(),r=a[0],s=n.split(" ");switch(n=s[0],s[1],n){case"sku":e=e.replace(r,t.sku);break;case"price_code":e=e.replace(r,t.price_code);break;case"product_id":e=e.replace(r,t.product_id);break;case"variant_id":e=e.replace(r,t.variant_id);break;case"product_handle":e=e.replace(r,t.product_handle);break;case"display_on_sale":e=e.replace(r,t.is_on_sale?"":'style="display:none!important;"');break;case"hide_on_sale":e=e.replace(r,t.is_on_sale?'style="display:none!important;"':"");break;case"percentage_difference":e=e.replace(r,t.percentage_difference);break;case"display_on_sold_out":e=e.replace(r,t.available?'style="display:none;"':"");break;case"display_on_available":e=e.replace(r,t.available?"":'style="display:none;"');break;case"price_with_format":var o=this.getMoneyWithFormat(t.money_format,t.price_amount);e=e.replace(r,o);break;case"compare_at_price_with_format":
var l=this.getMoneyWithFormat(t.money_format,t.compare_at_price);e=e.replace(r,l);break;case"price_difference_with_format":var c=this.getMoneyWithFormat(t.money_format,t.compare_at_price-t.price_amount);e=e.replace(r,c);break;case"inventory_quantity":e=e.replace(r,t.inventory_quantity);break;case"hide_above_inventory_threshold":var u=!!t.inventory_quantity&&"continue"!=t.inventory_policy&&t.inventory_quantity>0;e=e.replace(r,u?"":'style="display:none;"');break;case"vendor":e=e.replace(r,t.vendor);break;default:e=e.replace(r,"")}}return e}},{key:"productChangeRestructure",value:function(e,t){if(this.readyToInit()||this.hasOnlyDefaultVariant){for(var i=!1,a=e.querySelectorAll("[option-target]"),n=0;n<a.length;n++){var r=!1,s=a[n];if(!i){var o=s.getAttribute("option-target");s.hasAttribute("type-group")?o==t?(i=!0,r=!0):0:(0,"bottom")}r||this.removeElement(s)}if(this.pInformation.selected_product_group=t,!this.hasOnlyDefaultVariant){var l=this.uiElements.getSwatchRoot(this.productInfoTree.getOptions()),c=this.uiElements.parseHTML(l)[0];c=c.querySelector('[sa-options-position="default"]');e.firstChild;for(var u=e.querySelector('[sa-options-position="default"]');c.children.length>0;){var d=c.children[0];u.appendChild(d)}}M("Generating restructured swatch UI..."),this.generateUISwitch()(),this.generateProductGroups()}else setTimeout(this.productChangeRestructure.bind(this,e,t),100)}},{key:"productChangeOperations",value:function(e,t,i){var a=t.getAttribute("option-target"),n=t.parentNode.parentNode,r=this.getFirstAvailableVariant(e),s="undefined"!=typeof e.available?e.available:r.available;this.currentDocument.removeAttribute("swatch-current-variant"),null!=this.pInformation.preselect_variant&&(this.pInformation.preselect_variant=r.id),this.currentDocument.setAttribute("swatch-generated",e.handle),this.productChangeRestructure(n,a),this.dispatchCustomEvent(this.currentDocument,"product:changed",{productID:""+e.id,previousProductID:i});var o=this.getInstanceConfig().data_selectors,l=null,c=null,u={id:e.id,handle:e.handle,title:e.title,url:e.url,price:r.price,compare_at_price:r.compare_at_price,variant_id:r.id,sku:r.sku,available:s,inventory_policy:r.inventory_policy,inventory_quantity:r.inventory_quantity,featured_image:{src:null,secondary_src:null}};if(e.featured_image?(u.featured_image.src=e.featured_image,u.featured_image.secondary_src=e.featured_image):e.images&&e.images.length>=1&&(u.featured_image.src=e.images[0],u.featured_image.secondary_src=e.images[0]),e.images&&e.images.length>=2&&(u.featured_image.secondary_src=e.images[1]),""!=o.title&&(c=this.currentDocument.querySelectorAll(o.title),Object.entries(c).forEach(function(e){var t=_slicedToArray(e,2),i=t[0],a=t[1];"length"!=i&&(a.innerHTML=u.title)})),this.updateGridElements(u),this.updateGridAttributes(u),this.updateVariantImages(u,o),""!=o.url&&(c=this.currentDocument.querySelectorAll(o.url),Object.entries(c).forEach(function(e){var t=_slicedToArray(e,2),i=t[0],a=t[1];"length"!=i&&(a.hasAttribute("href")&&a.setAttribute("href",u.url),a.hasAttribute("data-href")&&a.setAttribute("data-href",u.url))})),this.updateAttributes({handle:u.handle,url:u.url,product_id:u.id,variant_id:u.variant_id},o),o.form_input&&""!=o.form_input&&(l=this.currentDocument.querySelector(o.form_input))){if("SELECT"==l.tagName&&(l.value=u.variant_id,l.value!=u.variant_id)){var d=document.createElement("option");d.value=u.variant_id,d.text=u.title,l.add(d)}l.value=u.variant_id,this.dispatchEvent("change",l)}}},{key:"getSwatchMinifiedCount",value:function(e){var t=this.clientSpecs.getSwatchPresentation("collections");if("general"==e&&t.minified||"groups"==e&&t.minified_products){var i=t.minified_display_count,a=Math.ceil(1920/i.length),n=Math.floor(window.screen.width/a);return n>=i.length&&(n=i.length-1),i[n]}return null}},{key:"updateVariantImages",value:function(e){var t=arguments.length<=1||arguments[1]===undefined?null:arguments[1],i=t||this.getInstanceConfig().data_selectors,a=null;""!=i.featured_image&&(a=this.currentDocument.querySelector(i.featured_image),this.updateVariantImage(a,e,!0)),""!=i.featured_image&&""!=i.secondary_image&&(a=this.currentDocument.querySelector(i.secondary_image),this.updateVariantImage(a,e,!1))}},{key:"updateAttributes",value:function(e,t){var i=this;t.attributes.length>0&&function(){var a=i.pInformation.attrs_to_update_selectors;if(void 0===a){a="[data-product-id]";for(var n=0;n<t.attributes.length;n++){a+=", ["+t.attributes[n].split(":")[0]+"]"}i.pInformation.attrs_to_update_selectors=a}var r=i.currentDocument.querySelectorAll(a),s=Object.entries(r);s.push([s.length+1,i.currentDocument]);var o=!!window.$&&!!window.$.fn&&!!window.$.fn.data;s.forEach(function(i){var a=_slicedToArray(i,2),n=a[0],r=a[1];if("length"!=n)for(var s=0;s<t.attributes.length;s++){var l=t.attributes[s].split(":"),c=l[0],u=l[1];if(r.hasAttribute(c)){var d="";switch(u){case"pid":d=e.product_id;break;case"vid":d=e.variant_id;break;case"handle":d=e.handle,r.getAttribute(c).includes("/products/")&&(d=e.url)}d&&(r.setAttribute(c,d),o&&window.$(r).data(c.replace("data-",""),d))}}})}()}},{key:"getGridUpdateParams",value:function(e){var t=this.productInfoTree.getProductInfo(),i={available:e.available,sku:e.sku,price_amount:e.price,compare_at_price:e.compare_at_price,product_id:t.id,vendor:t.vendor?t.vendor:"",money_format:"{{amount}}",inventory_quantity:e.inventory_quantity,inventory_policy:e.inventory_policy,is_on_sale:!1,variant_id:e.variant_id,product_handle:t.handle};Shopify&&Shopify.currency&&(i.price_code=Shopify.currency.active);var a=this.getMultiLingualInfo();a.money_format&&(i.money_format=a.money_format.trim());var n=0,r=i.price_amount,s=i.compare_at_price,o=null!=s&&s>r;return i.is_on_sale=o,o&&(n=r/s*100,n=Math.round(100-n),i.percentage_difference=n),i}},{key:"updateGridAttributes",value:function(e){var t=this,i=this.getInstanceConfig().attribute_updates,a=this.getGridUpdateParams(e),n=!!window.$&&!!window.$.fn&&!!window.$.fn.data;i&&i.forEach(function(e){var i=e.selector,r=e.attribute,s=e.template;if(""!=i||""!=r){var o="["+r+"]",l=i?t.currentDocument.querySelectorAll(""+i+o):t.currentDocument.querySelectorAll(o);if(l&&l.length>0)Array.from(l).forEach(function(e){var i=t.getModifiedTemplate(s,a);e.setAttribute(r,i),n&&window.$(e).data(r.replace("data-",""),i)})}})}},{key:"generateUIForCollection",value:function(e){var t=this;if(this.clientSpecs.getEnableStatusForProductGridType()){var i=null,a=null,n=null,r={},s={},o=null,l=undefined;if(e){if("A"!=(l=e.target).tagName&&(e.preventDefault(),e.stopPropagation()),"LI"==l.tagName&&l.hasAttribute("orig-value")&&l.children&&(l=l.children[0]),"keyup"==e.type&&13!==e.keyCode)return;for(;l.hasAttribute("swatch-inside")||"FONT"==l.tagName||"SVG"==l.tagName||"I"==l.tagName;)l=l.parentNode;if(this.isClickEvent(e.type)&&l.hasAttribute("data-navigation"))return void this.scrollSwatchSlider(l,!1);var c="mouseover"==e.type,u="mouseout"==e.type,d=c||u,p=d&&!this.selectionAllowed&&!this.pInformation.product_switched;if(!l.hasAttribute("swatch-option"))return void(u&&p&&this.pInformation.image_replaced_by_hover&&(this.updateVariantImages({}),this.pInformation.image_replaced_by_hover=!1));if("SELECT"==l.tagName&&"change"!=e.type)return;if(c&&p){var h=null,g=l.getAttribute("swatch-url");if(n=l.getAttribute("swatch-option"),a=l.getAttribute("orig-value"),g){var v=l.closest("[data-group-index]").getAttribute("data-group-index"),f=this.getProductsGroups([v])[0],m=g.split("/products/");m=m[m.length-1];for(var _=0;_<f.option_values.length;_++){var y=f.option_values[_];if(m==y.handle){y.image&&y.image.src&&(h={featured_image:{src:y.image.src,secondary_src:y.image.src}});break}}}else{this.uiElements.selectSwatch(n,l,a),h=this.getCurrentOptionForCollection(),h=this.productInfoTree.getVariantInfoFromOptions(h),l.classList.remove("swatch-selected");var b=this.currentDocument.querySelector("a[href]")?this.currentDocument.querySelector("a[href]").href:null;this.dispatchCustomEvent(this.currentDocument,"swatch:hover",{variantID:""+h.id,productHandle:""+this.productInfoTree.getProductInfo().handle,url:b})}if(!h)return;return this.updateVariantImages(h),void(this.pInformation.image_replaced_by_hover=!0)}if(d)return}if(e&&l.hasAttribute("swatch-url")){var S=function(){if(l.hasAttribute("current-product"))return{v:undefined};if("SELECT"!=l.tagName){var e=l.getAttribute("swatch-option"),i=l.getAttribute("orig-value"),a=l.closest("[option-target]").querySelector("span.swatch-variant-name");a&&"none"!=i&&(a.innerHTML=' <span class="swatch-split-symbol">'+t.labelSplitSymbol+"</span> "+i),t.uiElements.selectSwatch(e,l,i)}t.resetMultiLingualData();var n=l.closest("[option-target]"),r=t.productInfoTree.getProductInfo().id,s="SELECT"==l.tagName?l.value:l.getAttribute("swatch-url");return t.selectionAllowed=!1,t.hasOnlyDefaultVariant=!1,t.pInformation.product_switched=!0,t.productInfoTree=new O,t.executeFetch({url:s+".js",path_name:null,allow_processing:!0,callback:function(e){t.productChangeOperations(e,n,r)},translation_request:!1}),{v:undefined}}();if("object"==typeof S)return S.v}if(!(e&&"SELECT"==l.tagName&&l.options&&l.options.length>1&&this.isClickEvent(e.type))){if(e&&"select"==l.getAttribute("type")){var k=l,A=l.parentNode.querySelector("ul.swatch-drop-down-list"),I="true"==k.getAttribute("aria-expanded");return k.setAttribute("aria-expanded",!I),void A.classList.toggle("swatch-hide")}if(e&&"select_value"==l.getAttribute("type"))(k=l.closest("div.swatch-drop-down-inner").querySelector('div[type="select"]')).style.minWidth&&"0px"!=k.style.minWidth||this.setSelectMinWidth(k),k.innerHTML=l.innerHTML,k.setAttribute("aria-label",l.innerText),k.setAttribute("aria-expanded",!1),l.parentNode.classList.add("swatch-hide");if(e&&l.hasAttribute("swatch-option")){if(n=l.getAttribute("swatch-option"),i=n,this.uiElements.isDropDown(l.tagName))l.hasAttribute("data-selected")&&(l.remove(0),l.removeAttribute("data-selected")),a=l.value;else{a=l.getAttribute("orig-value");var T=l.closest("[option-target]").querySelector("span.swatch-variant-name");T&&"null"!=a&&(T.innerHTML=' <span class="swatch-split-symbol">'+this.labelSplitSymbol+"</span> "+a)}if(e&&this.pInformation.preselect_variant)"option"+this.productInfoTree.getOptions().length==n&&(this.pInformation.preselect_variant=0),this.selectionAllowed=!0;if(this.selectionAllowed||this.isEventTrusted(e,!0)){this.selectionAllowed=!0,this.uiElements.selectSwatch(n,l,a),r=this.getCurrentOptionForCollection(),o=this.productInfoTree.getVariantInfoFromOptions(r);var C=!0,E=this.currentDocument.getAttribute("swatch-current-variant");if(E||(E="0"),o&&(this.currentDocument.setAttribute("swatch-current-variant",o.id),this.dispatchCustomEvent(this.currentDocument,"variant:changed",{productID:""+this.productInfoTree.getProductInfo().id,variant:""+o.id,previousVariant:E,variantInformation:JSON.stringify(o)})),(o&&E==o.id||this.currentDocument.hasAttribute("sa-manual-update"))&&(C=!1),o&&C){var x=this.getInstanceConfig().data_selectors,D=null,L=null;this.updateVariantImages(o,x),""!=x.url&&function(){D=t.currentDocument.querySelectorAll(x.url);var e=/(?:variant=)[0-9]*/gm;Object.entries(D).forEach(function(t){var i=_slicedToArray(t,2),a=i[0],n=i[1];if("length"!=a&&n&&o.id){var r=n.hasAttribute("href")?n.getAttribute("href"):"",s=e.exec(r),l="variant="+o.id;s||(s=e.exec(r.toString())),s?r=r.replace(s[0],l):r.includes("?")?r+="&"+l:r+="?"+l,n.hasAttribute("href")&&n.setAttribute("href",r),n.hasAttribute("data-href")&&n.setAttribute("data-href",r)}})}();var N=this.productInfoTree.getProductInfo().handle;if(this.updateAttributes({handle:N,url:"/products/"+N+"?variant="+o.id,product_id:null,variant_id:o.id},x),this.updateGridElements(_extends({variant_id:o.id},o)),this.updateGridAttributes(_extends({variant_id:o.id},o)),x.form_input&&""!=x.form_input&&(L=this.currentDocument.querySelector(x.form_input))){if("SELECT"==L.tagName&&(L.value=o.id,L.value!=o.id)){var P=document.createElement("option");P.value=o.id,P.text=o.title,L.add(P)}L.value=o.id,this.dispatchEvent("change",L)}}}}if(this.readyToInit()){this.uiElements.getIsSwatchRootDisplayed()||this.uiElements.renderSwatchRoot(this.uiElements.getSwatchRoot(this.productInfoTree.getOptions()),this.getCorrectSwatchRoot()),r=this.getCurrentOptionForCollection();var q=undefined;q=w?w.trim():this.multiLingualInfo.money_format.trim(),s=this.productInfoTree.getNodeByOptions(r,q,this.getMoneyWithFormat.bind(this)),Object.entries(s).forEach(function(e){var a=_slicedToArray(e,2),n=a[0],s=a[1];if(null==i){var o=t.uiElements.getViewByType(s.view_type_preset).getView(n,s),l=t.uiElements.renderNormal(n,o,t.getCorrectSwatchRoot());1==s.data.length&&"null"==s.data[0].value&&l.length>0&&l[0].closest&&(l[0].closest("div.swatch-single").style.display="none"),M("Generated UI for - "+n);var c=r[n],u=!1,d=t.getSwatchMinifiedCount("general"),p=s.view_type_preset;Object.entries(l).forEach(function(e){var a=_slicedToArray(e,2),n=a[0],r=a[1];if("length"!=n){var o=n==l.length-1;if(null!=d&&("swatch"==p.assoc_view_type||"button"==p.assoc_view_type)){var h=null;if(n>=d){var g=r.closest("li.swatch-view-item");g&&(h=g)}if(o){var v=l.length-d;if(v>0){var f=r.closest("[option-name]").getAttribute("option-name"),m=t.uiElements.getMinifiedHTML(f,v,t.productInfoTree.getProductInfo());r.closest("ul.swatch-view").appendChild(m)}if((S=r.closest(".swatch-navigable, variant-swatch-king"))&&"VARIANT-SWATCH-KING"!=S.tagName){S.querySelector(".swatch-navigation");var _=r.closest(".swatch-navigable");t.resSliderSize(_,p.params,p.assoc_view_type)}}if(h)return void t.removeElement(h)}var y=null;if(setTimeout(function(){var e="swatch-allow-animation";r.classList.add(e)},128),t.uiElements.isDropDown(r.tagName)){t.getLabelWidth(r,p.params.padding_left),y=r.value;for(var w=r.querySelectorAll("option"),b=0;b<w.length;b++)w[b].getAttribute("value")==c&&(y=c,r.value=c)}else y=r.getAttribute("orig-value");if(y==c&&(u=!0,t.uiElements.isDropDown(r.tagName)?t.dispatchEvent("change",r):t.dispatchEvent("virtual_click",r)),o){var S;if((S=r.closest(".swatch-navigable, variant-swatch-king"))&&"VARIANT-SWATCH-KING"!=S.tagName)S.querySelector(".swatch-navigation"),_=r.closest(".swatch-navigable"),t.resSliderSize(_,p.params,p.assoc_view_type);if(!t.selectionAllowed&&"SELECT"==r.tagName){var k=t.getTranslation(t.doNotSelectAnOption.text);k=k.replace(/{{\s*option_name\s*}}/gm,s.name);var A=document.createElement("option");A.value=r.value,A.innerHTML=k,r.insertBefore(A,r.options[0]),r.selectedIndex=0,r.setAttribute("data-selected",!1)}i="None",u||(t.uiElements.isDropDown(l[0].tagName)?t.dispatchEvent("change",l[0]):t.dispatchEvent("virtual_click",l[0]))}}})}else i==n&&(i=null)})}else this.hasOnlyDefaultVariant||setTimeout(this.generateUIForCollection.bind(this,e),100)}}}},{key:"getCurrentOptionForCollection",value:function(){if(this.pInformation.preselect_variant){for(var e=this.pInformation.preselect_variant,t=this.productInfoTree.getVariants()[e],i={},a=0;a<t.options.length;a++){i[o="option"+(a+1)]=t.options[a]}return i}var n=this.getCorrectSwatchRoot().querySelectorAll(".swatches .swatch-selector"),r=this.productInfoTree.getOptions(),s={};for(a=0;a<n.length;a++){var o=n[a].getAttribute("swatch-option");n[a].classList.contains("swatch-selected")&&(s[o]=n[a].getAttribute("orig-value"),"SELECT"==n[a].tagName&&(s[o]=n[a].value))}var l={};for(a=0;a<r.length;a++){if(!s[o="option"+(a+1)]){var c=this.pInformation.first_or_available_variant;s[o]=c.options[a],"object"==typeof s[o]&&s[o].title&&(s[o]=s[o].title)}l[o]=s[o]}return l}},{key:"getFirstAvailableVariant",value:function(e){undefined;return"undefined"!=typeof e.available&&e.available?e.variants.find(function(e){return!0===e.available}):e.variants[0]}},{key:"resetMultiLingualData",value:function(){this.multiLingualInfo=null,this.untranslatedData=null,this.untranslatedFetchStatus="none"}},{key:"getMultiLingualInfo",value:function(){if(null==this.multiLingualInfo){var e=g;e&&""!=e&&(e=e.replace(/\/$/,"")),this.multiLingualInfo={default_language:this.clientSpecs.getDefaultLanguage(),money_format:w},this.multiLingualInfo.current_url=e,window.Shopify&&window.Shopify.locale&&(this.multiLingualInfo.current_language=window.Shopify.locale);window.location.pathname.split("/")[1];this.multiLingualInfo.translation_status=this.multiLingualInfo.current_language!=this.multiLingualInfo.default_language,M(["Found language information in DOM",this.multiLingualInfo])}return this.multiLingualInfo}},{key:"fetchUntranslatedOptions",value:function(e){var t=this;if(this.getMultiLingualInfo().translation_status&&e){this.untranslatedFetchStatus="pending";var i=o(this.multiLingualInfo.default_language),a=window.Shopify.country,n=this.getDataFromSessionStorage(this.getSessionStorageKey(e,!1,!0,!0));if(n)return null!==n.id&&(this.untranslatedData={handle:n.handle,options:n.options,variants:n.variants.nodes}),void(this.untranslatedFetchStatus="completed");var r="\n            query productDetails @inContext(country: "+a.toUpperCase()+", language: "+i+') {\n                product(id: "gid://shopify/Product/'+e+'") {\n                    id\n                    handle\n                    title\n                    vendor\n                    availableForSale\n                    onlineStoreUrl\n                    tags\n                    priceRange{\n                        maxVariantPrice{\n                            amount\n                        }\n                        minVariantPrice{\n                            amount\n                        }\n                    }\n                    featuredImage{\n                        id\n                        url\n                    }\n                    options{\n                        id\n                        name\n                        values\n                    }\n                    images(first: 250){\n                        nodes{\n                            id\n                            url\n                            altText\n                        }\n                    }\n                    variants(first:250){\n                        nodes{\n                            id\n                            availableForSale\n                            quantityAvailable\n                            compareAtPrice{\n                                currencyCode\n                                amount\n                            }\n                            selectedOptions{\n                                name\n                                value\n                            }\n                            currentlyNotInStock\n                            featured_image: image{\n                                id\n                                src: url\n                                altText\n                            }\n                            price{\n                                currencyCode\n                                amount\n\n                            }\n                            title\n                            sku\n                        }\n                    }\n                }\n            }\n        ';this.executeStorefrontFetch({query:r,callback:function(i,a){var n=i.product,r=a.context,s=r.country,o=r.language;t.setDataToSessionStorage(t.getSessionStorageKey(e,!1,!0,!0,s,o),n),t.setDataToSessionStorage(t.getSessionStorageKey(n.handle,!1,!0,!0,s,o),n),t.untranslatedData={handle:n.handle,options:n.options,variants:n.variants.nodes},t.untranslatedFetchStatus="completed"}})}}},{key:"getUntranslatedFetchStatus",value:function(){return this.untranslatedFetchStatus}},{key:"getUntranslatedData",value:function(){return this.untranslatedData}},{key:"getTranslation",value:function(e){var t=this.getMultiLingualInfo();if(t.translation_status){var i=this.clientSpecs.getLocalizedStrings()[e];if(i&&(i=i[t.current_language])&&i.trim().length>0)return i}return e}},{key:"getHandleFromURL",value:function(e){var t=e.split("/");return(t=(t=t[t.length-1]).split(RegExp("\\?|\\#|\\.js","gi")))[0]}},{key:"getSessionStorageKey",value:function(e,t,i){var a=!(arguments.length<=3||arguments[3]===undefined)&&arguments[3],n=arguments.length<=4||arguments[4]===undefined?null:arguments[4],r=arguments.length<=5||arguments[5]===undefined?null:arguments[5];if(window.sessionStorage){var s=t?this.getHandleFromURL(e):e,l=this.getMultiLingualInfo(),c=n;c||(c=window.Shopify&&window.Shopify.country?window.Shopify.country:"NULL");var u=r;return u||(u=(u=o(i?l.default_language:l.current_language)).toUpperCase()),a?"starapps_storefront_"+s+"_"+u+"_"+c:"starapps_"+s+"_"+u+"_"+c}return null}},{key:"getDataFromSessionStorage",value:function(e){if(window.sessionStorage&&"string"==typeof e){var t=sessionStorage.getItem(e);if(t)return JSON.parse(t)}return null}},{key:"setDataToSessionStorage",value:function(e,t){if(window.sessionStorage&&"string"==typeof e&&"object"==typeof t){var i=function(){var i=(new Date).getTime();null!=t?t.created_at=i:t={id:null,created_at:i};var a=JSON.stringify(t);return setTimeout(function(){try{sessionStorage.setItem(e,a)}catch(t){}},0),{v:!0}}();if("object"==typeof i)return i.v}return!1}},{key:"removeDataToSessionStorage",value:function(e){return!(!window.sessionStorage||"string"!=typeof e)&&(sessionStorage.removeItem(e),!0)}},{key:"disableAdd2CartButton",value:function(e,t){var i=this.clientSpecs.getSelectors(),a=this.currentDocument.querySelectorAll(i.add_to_cart_selector);Object.entries(a).forEach(function(a){var n=_slicedToArray(a,2),r=n[0],s=n[1];if("length"!=r)if(s.setAttribute("disabled","disabled"),""!=t.trim()&&(s.className=t),"INPUT"==s.tagName)s.hasAttribute("original-text")||s.setAttribute("original-text",s.value),s.value=e;else if("BUTTON"==s.tagName){var o=s;s.children.length>0&&(o=s.querySelector(i.add_to_cart_text_selector)),o&&(s.hasAttribute("original-text")||s.setAttribute("original-text",o.innerHTML),o.innerHTML=e)}})}},{key:"restoreAddToCart",value:function(){var e=this,t=this.clientSpecs.getSelectors(),i=this.currentDocument.querySelectorAll(t.add_to_cart_selector);Object.entries(i).forEach(function(i){var a=_slicedToArray(i,2),n=a[0],r=a[1];if("length"!=n)if(r.removeAttribute("disabled"),e.clientSpecs.getSelectors().add_to_cart_enabled_classes&&""!=e.clientSpecs.getSelectors().add_to_cart_enabled_classes.trim()&&(r.className=e.clientSpecs.getSelectors().add_to_cart_enabled_classes),"INPUT"==r.tagName&&r.hasAttribute("original-text")){var s=r.getAttribute("original-text");r.removeAttribute("original-text"),r.value=s}else if("BUTTON"==r.tagName){var o=r;if(r.children.length>0&&(o=r.querySelector(t.add_to_cart_text_selector)),o&&r.hasAttribute("original-text")){s=r.getAttribute("original-text");r.removeAttribute("original-text"),o.innerHTML=s}}})}},{key:"getOptionIndexKey",value:function(e,t){var i=this.clientSpecs.getSelectors().option_index_attributes,a=t;if("undefined"==typeof this.themeSupportConfig.attribute_name||"none"!=this.themeSupportConfig.attribute_name&&e.hasAttribute(this.themeSupportConfig.attribute_name)){for(var n=0;n<i.length;n++)if(e.hasAttribute(i[n])){var r=e.getAttribute(i[n]);if(r.match(RegExp("option\\d+","gi"))){a=r,this.themeSupportConfig.attribute_name=i[n];break}}"undefined"==typeof this.themeSupportConfig.attribute_name&&(this.themeSupportConfig.attribute_name="none")}else"none"!=this.themeSupportConfig.attribute_name&&e.hasAttribute(this.themeSupportConfig.attribute_name)&&(a=e.getAttribute(this.themeSupportConfig.attribute_name));return a}},{key:"getCurrentOption",value:function(){for(var e={},t=this.currentDocument.querySelectorAll(this.themeSupportConfig.option_selector),i=0;i<t.length;i++){var a="option"+(i+1),n=t[i].value;if(a=this.getOptionIndexKey(t[i],a),t[i].hasAttribute("orig-value"))n=t[i].options[t[i].selectedIndex].getAttribute("orig-value");e[a]=n}return e=this.sortObjectByKeys(e)}},{key:"getCurrentOptionDawn",value:function(){var e=this.themeSupportConfig.key_mapping,t={},i=this.currentDocument.querySelectorAll(this.themeSupportConfig.option_selector);if(1==i.length&&"SELECT"==i[0].tagName&&"id"==i[0].name)return this.getCurrentOptionMotion(i[0]);for(var a=this.clientSpecs.getCustomButtonParams(),n=0;n<i.length;n++){var r=i[n],s=r.value,o=r.name?r.name:r.id,l="SELECT"!=r.tagName&&"INPUT"!=r.tagName;if(l){o=null;for(var c=0;c<a.data.length;c++){var u=a.data[c],d=u.option_attribute,p=u.value_attribute;if(r.hasAttribute(d))o=r.getAttribute(d);else{var h=r.closest("["+d+"]")||r.parentNode.querySelector("["+d+"]");h&&(o=h.getAttribute(d))}if(o&&r.hasAttribute(p)){s=r.getAttribute(p);break}}}var g=e[o];if(!g&&o){var v=s;if("SELECT"==r.tagName){var f=r.options[1];f&&(v=f.value)}var m=o;if(!l){var _=this.clientSpecs.getSelectors().option_index_attributes;if(_&&_.length>0)for(var y=0;y<_.length;y++){var w=_[y],b=r.getAttribute(w);if(b){m=b;break}}}var S=this.themeSupportConfig.index_strategy,k=this.productInfoTree.getOptionKeyByName(m,v,S,this.morphValues.bind(this));this.themeSupportConfig.index_strategy=k[1],(g=k[0])==o&&(o=this.productInfoTree.getOptionNameByKey(g)),this.themeSupportConfig.key_mapping[o]=g}else o||(g="option"+(n+1));r.checked||"SELECT"==r.tagName?t[g]=s:l&&r.matches(a.selected_selector)?t[g]=s:"undefined"==typeof t[g]&&(t[g]=s)}return t=this.sortObjectByKeys(t)}},{key:"getCurrentOptionBrooklyn",value:function(){for(var e={},t=this.currentDocument.querySelectorAll(this.themeSupportConfig.option_selector),i=0;i<t.length;i++)if(t[i].checked){var a=t[i].getAttribute(this.themeSupportConfig.attribute_name),n=t[i].value;(a=RegExp("(?:(?:option[^\\d\\s]*)(\\d+))|(^\\d+$)","gi").exec(a))&&a[1]?a=a[1]:a&&a[2]&&(a=a[2]),e[a="type0"==this.themeSupportConfig.strategy?"option"+((a=parseInt(a))+1):"option"+a]=n}return e=this.sortObjectByKeys(e)}},{key:"sortObjectByKeys",value:function(e){for(var t={},i=1,a="option"+i;"undefined"!=typeof e[a];)t[a]=e[a],a="option"+(i+=1);return t}},{key:"getCurrentOptionPrestige",value:function(){for(var e={},t=this.currentDocument.querySelectorAll(this.themeSupportConfig.option_selector),i=0;i<t.length;i++)if(t[i].classList.contains("is-selected")||1==t[i].checked){var a="option"+(i+1),n=t[i].value;if("button"==t[i].getAttribute("type")&&(n=t[i].getAttribute("data-value")),t[i].hasAttribute("data-option-value")&&(n=t[i].getAttribute("data-option-value")),t[i].hasAttribute("data-option-position")){var r=t[i].getAttribute("data-option-position");a="option"+r,r.includes("option")&&(a=r)}e[a]=n}return e=this.sortObjectByKeys(e)}},{key:"getCurrentOptionEmpire",value:function(){for(var e={},t=this.currentDocument.querySelectorAll(this.themeSupportConfig.option_selector),i=0;i<t.length;i++){var a="option"+(i+1),n=t[i].value;if(t[i].hasAttribute("data-product-option"))a="option"+(parseInt(t[i].getAttribute("data-product-option"))+1);e[a]=n}return e}},{key:"getCurrentOptionMotion",value:function(){var e=arguments.length<=0||arguments[0]===undefined?null:arguments[0],t={},i=e||this.currentDocument.querySelector(this.themeSupportConfig.option_selector),a=0,n=i.value,r=this.productInfoTree.getVariantsKeys();""==n&&(this.themeSupportConfig.last_variant_id||(this.themeSupportConfig.last_variant_id=q()),n=this.themeSupportConfig.last_variant_id);var s=this.productInfoTree.getVariants(),o=s[n];for(void 0===o&&(n=r[0],i.value=n,o=s[n],this.dispatchEvent("change",i));i;){var l="option"+(a+1);if(!o[l])break;t[l]=o[l],a++}return t}},{key:"currentOptionSwitch",value:function(e){switch(e){case"common":return{get:this.getCurrentOption.bind(this)};case"brooklyn":return{get:this.getCurrentOptionBrooklyn.bind(this)};case"prestige":return{get:this.getCurrentOptionPrestige.bind(this)};case"motion":return{get:this.getCurrentOptionMotion.bind(this)};case"dawn":return{get:this.getCurrentOptionDawn.bind(this)};case"empire":return{get:this.getCurrentOptionEmpire.bind(this)}}}},{key:"triggerChange",value:function(e,t){for(var i=this.currentDocument.querySelectorAll(this.themeSupportConfig.option_selector),a=0;a<i.length;a++){var n="option"+(a+1);if((n=this.getOptionIndexKey(i[a],n))==e){if(i[a].hasAttribute("orig-value"))for(var r=i[a].options,s=0;s<r.length;s++){var o=r[s];if(o.hasAttribute("orig-value")&&o.getAttribute("orig-value")==t){t=o.getAttribute("value");break}}var l=i[a].value!=t;if(this.doNotSelectAnOption.status&&this.doNotSelectAnOption.trusted_event_detected&&(l=!0),l){i[a].value=t,this.dispatchEvent("change",i[a]);var c=q();this.allOptionsData.variantId!=c&&(this.allOptionsData.variantId=c,this.dispatchCustomEvent(i[a],"product:variant:changed",this.allOptionsData))}break}}}},{key:"triggerChangeDawn",value:function(e,t){var i=this.themeSupportConfig.key_mapping,a=this.currentDocument.querySelectorAll(this.themeSupportConfig.option_selector);if(1==a.length&&"SELECT"==a[0].tagName&&"id"==a[0].name)return this.triggerChangeMotion(e,t,a[0]);for(var n=this.clientSpecs.getCustomButtonParams(),r=0;r<a.length;r++){var s=a[r],o=s.value,l="SELECT"==s.tagName,c=s.name?s.name:s.id,u=!l&&"INPUT"!=s.tagName;if(u){c=null;for(var d=0;d<n.data.length;d++){var p=n.data[d],h=p.option_attribute,g=p.value_attribute;if(s.hasAttribute(h))c=s.getAttribute(h);else{var v=s.closest("["+h+"]")||s.parentNode.querySelector("["+h+"]");v&&(c=v.getAttribute(h))}if(c&&s.hasAttribute(g)){o=s.getAttribute(g);break}}}var f=i[c];if(!f&&c){var m=o;if(l){var _=s.options[1];_&&(m=_.value)}var y=c;if(!u){var w=this.clientSpecs.getSelectors().option_index_attributes;if(w&&w.length>0)for(var b=0;b<w.length;b++){var S=w[b],k=s.getAttribute(S);if(k){y=k;break}}}var A=this.themeSupportConfig.index_strategy,I=this.productInfoTree.getOptionKeyByName(y,m,A,this.morphValues.bind(this));this.themeSupportConfig.index_strategy=I[1],(f=I[0])==c&&(c=this.productInfoTree.getOptionNameByKey(f)),this.themeSupportConfig.key_mapping[c]=f}else c||(f="option"+(r+1));if(l){var T=s.value!=t;if(this.doNotSelectAnOption.status&&this.doNotSelectAnOption.trusted_event_detected&&(T=!0),T&&f==e){s.value=t,this.dispatchEvent("change",s);var C=q();this.allOptionsData.variantId!=C&&(this.allOptionsData.variantId=C,this.dispatchCustomEvent(s,"product:variant:changed",this.allOptionsData));break}}else{T=u?!s.matches(n.selected_selector):!s.checked;if(this.doNotSelectAnOption.status&&this.doNotSelectAnOption.trusted_event_detected&&(T=!0),T&&f==e&&o==t){s.removeAttribute("disabled"),s.click(),u||s.checked||s.click();C=q();this.allOptionsData.variantId!=C&&(this.allOptionsData.variantId=C,this.dispatchCustomEvent(s,"product:variant:changed",this.allOptionsData));break}}}}},{key:"triggerChangeBrooklyn",value:function(e,t){for(var i=this.currentDocument.querySelectorAll(this.themeSupportConfig.option_selector),a=0;a<i.length;a++){var n=i[a].getAttribute(this.themeSupportConfig.attribute_name),r=i[a].value;(n=RegExp("(?:(?:option[^\\d\\s]*)(\\d+))|(^\\d+$)","gi").exec(n))&&n[1]?n=n[1]:n&&n[2]&&(n=n[2]),n="type0"==this.themeSupportConfig.strategy?"option"+((n=parseInt(n))+1):"option"+n;var s=!i[a].checked;if(this.doNotSelectAnOption.status&&this.doNotSelectAnOption.trusted_event_detected&&(s=!0),s&&n==e&&r==t){i[a].hasAttribute("disabled")&&i[a].removeAttribute("disabled"),i[a].click(),i[a].checked||i[a].click();var o=q();this.allOptionsData.variantId!=o&&(this.allOptionsData.variantId=o,this.dispatchCustomEvent(i[a],"product:variant:changed",this.allOptionsData));break}}}},{key:"triggerChangePrestige",value:function(e,t){for(var i=this.currentDocument.querySelectorAll(this.themeSupportConfig.option_selector),a=0;a<i.length;a++){var n="option"+(a+1),r=i[a].value;if("button"==i[a].getAttribute("type")&&(r=i[a].getAttribute("data-value")),i[a].hasAttribute("data-option-value")&&(r=i[a].getAttribute("data-option-value")),i[a].hasAttribute("data-option-position")){var s=i[a].getAttribute("data-option-position");n="option"+s,s.includes("option")&&(n=s)}var o=!i[a].classList.contains("is-selected")&&!i[a].checked;if(this.doNotSelectAnOption.status&&this.doNotSelectAnOption.trusted_event_detected&&(o=!0),o&&n==e&&r==t){i[a].click();var l=q();this.allOptionsData.variantId!=l&&(this.allOptionsData.variantId=l,this.dispatchCustomEvent(i[a],"product:variant:changed",this.allOptionsData));break}}}},{key:"triggerChangeEmpire",value:function(e,t){for(var i=this.currentDocument.querySelectorAll(this.themeSupportConfig.option_selector),a=0;a<i.length;a++){var n="option"+(a+1);if(i[a].hasAttribute("data-product-option"))n="option"+(parseInt(i[a].getAttribute("data-product-option"))+1);var r=i[a].value!=t;if(this.doNotSelectAnOption.status&&this.doNotSelectAnOption.trusted_event_detected&&(r=!0),r&&n==e){i[a].value=t,this.dispatchEvent("change",i[a]);var s=q();this.allOptionsData.variantId!=s&&(this.allOptionsData.variantId=s,
this.dispatchCustomEvent(i[a],"product:variant:changed",this.allOptionsData));break}}}},{key:"triggerChangeMotion",value:function(e,t){var i=arguments.length<=2||arguments[2]===undefined?null:arguments[2],a=i||this.currentDocument.querySelector(this.themeSupportConfig.option_selector),n=this.productInfoTree.getVariants(),r=this.productInfoTree.getVariantsKeys(),s=a.value,o=[];""==s&&(this.themeSupportConfig.last_variant_id||(this.themeSupportConfig.last_variant_id=q()),s=this.themeSupportConfig.last_variant_id);var l=n[s];void 0===l&&(s=r[0],a.value=s,l=n[s],this.dispatchEvent("change",a));for(var c=0;c<r.length;c++){for(var u=n[r[c]],d=null,p=0;null==d||1==d;){var h="option"+(p+1);if(!u[h]||!l[h])break;var g=l[h];h==e&&(g=t),u[h]!=g?d=!1:(d=!0,o.push(u)),p++}!d&&o.length>0&&c==r.length-1&&(d=!0,u=o[0]);var v=d&&a.value!=u.id;if(d&&this.doNotSelectAnOption.status&&this.doNotSelectAnOption.trusted_event_detected&&(v=!0),v){this.themeSupportConfig.last_variant_id=u.id,a.value=u.id,this.dispatchEvent("change",a);var f=a.closest("[data-section-type]");if(f){var m={variant:n[u.id]};this.dispatchThemeEvent("variantChange",f,m)}var _=this.currentDocument.querySelector(this.clientSpecs.getSelectors().add_to_cart_selector);_&&(""==a.value?_.setAttribute("disabled",!0):_.removeAttribute("disabled"));var y=q();this.allOptionsData.variantId!=y&&(this.allOptionsData.variantId=y,this.dispatchCustomEvent(a,"product:variant:changed",this.allOptionsData));break}if(!v&&d)break}}},{key:"changeSwitch",value:function(e){switch(e){case"common":return{change:this.triggerChange.bind(this)};case"brooklyn":return{change:this.triggerChangeBrooklyn.bind(this)};case"prestige":return{change:this.triggerChangePrestige.bind(this)};case"motion":return{change:this.triggerChangeMotion.bind(this)};case"dawn":return{change:this.triggerChangeDawn.bind(this)};case"empire":return{change:this.triggerChangeEmpire.bind(this)}}}},{key:"generateUISwitch",value:function(){return this.isInstanceTypeCollection()?this.generateUIForCollection.bind(this):this.generateUI.bind(this)}},{key:"generateUI",value:function(e){var t=this,i=null,a=null,n=null,r={},s={},o=!1,l=!1,c=undefined,u=undefined;u=w?w.trim():this.multiLingualInfo.money_format.trim();var d=q();if(this.allOptionsData.variantId=d,e){if("LI"==(c=e.target).tagName&&c.hasAttribute("orig-value")&&c.children&&(c=c.children[0]),"keyup"==e.type&&13!==e.keyCode)return;for(;c.hasAttribute("swatch-inside")||"FONT"==c.tagName||"SVG"==c.tagName||"I"==c.tagName;)c=c.parentNode;if(this.isClickEvent(e.type)&&c.hasAttribute("data-navigation"))return void this.scrollSwatchSlider(c,!1);if(!c.hasAttribute("swatch-option"))return;if("SELECT"==c.tagName&&"change"!=e.type)return}if(e&&c.hasAttribute("swatch-url")&&this.isEventTrusted(e,!0)&&window.encodeURIComponent&&(this.isClickEvent(e.type)&&"SELECT"!=c.tagName||"change"==e.type&&"SELECT"==c.tagName)){if(c.hasAttribute("current-product"))return;var p="";if(!this.hasOnlyDefaultVariant&&!this.hasOnlySingleVariant){var h=this.currentOptionSwitch(this.themeCode).get(),g=Object.keys(h);if(this.clientSpecs.getPersistGroupVariant()){for(var v=0;v<g.length;v++){var f=g[v],m=h[f];p+="&"+f+"="+encodeURIComponent(m)}""!=p&&(p=p.replace(RegExp("^&","gi"),"?"))}}var _=c.getAttribute("swatch-url");"SELECT"==c.tagName&&(_=c.value);var y=_+p;this.clientSpecs.getHistoryFreeGroupNavigation()?window.location.replace(y):window.location.assign?window.location.assign(y):window.location.href=y}else{if(e&&"select"==c.getAttribute("type")){var b=c,S=c.parentNode.querySelector("ul.swatch-drop-down-list"),k="true"==b.getAttribute("aria-expanded");return b.setAttribute("aria-expanded",!k),void S.classList.toggle("swatch-hide")}if(e&&"select_value"==c.getAttribute("type"))(b=c.closest("div.swatch-drop-down-inner").querySelector('div[type="select"]')).style.minWidth&&"0px"!=b.style.minWidth||this.setSelectMinWidth(b),b.innerHTML=c.innerHTML,b.setAttribute("aria-label",c.innerText),b.setAttribute("aria-expanded",!1),c.parentNode.classList.add("swatch-hide");if(e&&this.doNotSelectAnOption.status){var A=c.getAttribute("swatch-option"),I=parseInt(A[6])-1,T=this.productInfoTree.getOptions()[I],C="undefined"!=typeof T.untranslated_name?T.untranslated_name:T.name,E=this.clientSpecs.getTriggerActionByOptionName(C),x=T.values,D="virtual_click"==e.type||"change"==e.type&&!this.isEventTrusted(e,!0);if(this.doNotSelectAnOption.option_name=T.name,this.doNotSelectAnOption.trusted_event_detected=!1,"manual"==E&&x.length>1){if(this.dispatchCustomEvent(this.currentDocument,"manual:selection:hold",this.allOptionsData),window.starapps_stock_data?window.starapps_stock_data.show_stock_alert=!1:(window.starapps_stock_data={},window.starapps_stock_data.show_stock_alert=!1),!this.doNotSelectAnOption[A]&&D){var O=this.getTranslation(this.doNotSelectAnOption.text);O=O.replace(/{{\s*option_name\s*}}/gm,T.name);var L=c.closest("div.swatch-single").querySelector("label.swatch-label");if(this.uiElements.isDropDown(c.tagName)){var N=document.createElement("option");N.value="",N.innerHTML=O,c.insertBefore(N,c.options[0]),c.selectedIndex=0}else if("select_value"==c.getAttribute("type")){var P=c.closest(".swatch-drop-down-inner");if(P)(P=P.querySelector('[type="select"]')).querySelector("span").innerHTML=O,this.setSelectMinWidth(P)}else L.hasAttribute("original-text")||L.setAttribute("original-text",L.innerHTML),L.innerHTML='<input type="checkbox" name="manual" value="true" checked="checked">'+O;if(!this.doNotSelectAnOption.allow_virtual_trigger){if(this.doNotSelectAnOption.control_add_to_cart)H=(H=this.getTranslation(this.doNotSelectAnOption.make_a_selection_text)).replace(/{{\s*option_name\s*}}/gm,this.doNotSelectAnOption.option_name),this.disableAdd2CartButton(H,this.clientSpecs.getSelectors().add_to_cart_disabled_classes);return}o=!0}else if(!D){this.doNotSelectAnOption.trusted_event_detected=!0,this.restoreAddToCart();var R=(L=c.closest("div.swatch-single").querySelector("label.swatch-label")).getAttribute("original-text");R&&(L.removeAttribute("original-text"),L.innerHTML=R),this.uiElements.isDropDown(c.tagName)&&!this.doNotSelectAnOption[A]&&c.remove(0),this.doNotSelectAnOption[A]||(this.doNotSelectAnOption.count+=1,this.doNotSelectAnOption[A]=!0)}}else this.doNotSelectAnOption[A]||(this.doNotSelectAnOption.count+=1,this.doNotSelectAnOption[A]=!0)}if(!(e&&this.uiElements.isDropDown(c.tagName)&&c.options&&c.options.length>1&&this.isClickEvent(e.type))){if(e&&c.hasAttribute("swatch-option")){if(n=c.getAttribute("swatch-option"),i=n,this.uiElements.isDropDown(c.tagName))a=c.value;else{a=c.getAttribute("orig-value");var V=c.closest("[option-target]").querySelector("span.swatch-variant-name"),F=c.getAttribute("data-value");V&&"null"!=a&&"none"!=F&&(V.innerHTML=' <span class="swatch-split-symbol">'+this.labelSplitSymbol+"</span> "+F)}var H;if(o||this.uiElements.selectSwatch(n,c,a),this.changeSwitch(this.themeCode).change(n,a),o)if(this.doNotSelectAnOption.control_add_to_cart)H=(H=this.getTranslation(this.doNotSelectAnOption.make_a_selection_text)).replace(/{{\s*option_name\s*}}/gm,this.doNotSelectAnOption.option_name),this.disableAdd2CartButton(H,this.clientSpecs.getSelectors().add_to_cart_disabled_classes)}if(this.readyToInit()){this.doNotSelectAnOption.status&&this.doNotSelectAnOption.count>=this.productInfoTree.getOptions().length&&(this.doNotSelectAnOption.status=!1,window.starapps_stock_data?window.starapps_stock_data.show_stock_alert=!0:(window.starapps_stock_data={},window.starapps_stock_data.show_stock_alert=!0),this.dispatchCustomEvent(this.currentDocument,"selection:release",this.allOptionsData));var j=this.getCorrectSwatchRoot();if(this.uiElements.getIsSwatchRootDisplayed()||this.uiElements.renderSwatchRoot(this.uiElements.getSwatchRoot(this.productInfoTree.getOptions()),j),r=this.currentOptionSwitch(this.themeCode).get(),M(r),"undefined"==typeof r.option1){M("currentOption was not properly formed!");for(var U=this.productInfoTree.getOptions(),G=0;G<U.length;G++){var W="option"+(G+1),B=this.currentDocument.querySelector('[swatch-option="'+W+'"].swatch-selected');r[W]="",B&&(this.uiElements.isDropDown(B.tagName)?r[W]=B.value:r[W]=B.getAttribute("orig-value"))}}if(!e&&this.clientSpecs.getPersistGroupVariant()&&window.decodeURIComponent&&window.location.href.includes("option1=")&&!window.location.href.includes("variant="))for(var z=/option\d=[^\&]*/gm,J=window.location.href,K=null;null!==(K=z.exec(J));){K.index===z.lastIndex&&z.lastIndex++;var $=K[0].split("="),X=(A=$[0],decodeURIComponent($[1]));r[A]=X,this.changeSwitch(this.themeCode).change(A,X)}s=this.productInfoTree.getNodeByOptions(r,u,this.getMoneyWithFormat.bind(this)),M(s);var Z=!0,Y=!1,Q=undefined;try{var ee=function(){var e=_slicedToArray(te.value,2),a=e[0],n=e[1];if(null!=i){if(i==a)i=null;else{var s=n.view_type_preset.params.price_badge;if(s!=undefined&&s.price_enabled){var c=j.querySelectorAll('[option-target="'+a+'"] .swatch-view-item .swatch-selector');ae=!0,ne=!1,re=undefined;try{for(se=c[Symbol.iterator]();!(ae=(oe=se.next()).done);ae=!0){var u=oe.value;u.querySelector(".swatch-price-adjacent span").innerHTML=t.getOptionPriceInfo("option1"==a?u.dataset.value:t.doNotSelectAnOption.option1?r.option1:null,"option2"==a?u.dataset.value:t.doNotSelectAnOption.option2?r.option2:null,"option3"==a?u.dataset.value:t.doNotSelectAnOption.option3?r.option3:null)}}catch(_){ne=!0,re=_}finally{try{!ae&&se["return"]&&se["return"]()}finally{if(ne)throw re}}}}return"continue"}if(o){for(var d=r[a],p=0;p<n.data.length;p++){if(d==n.data[p].value){t.changeSwitch(t.themeCode).change(a,n.data[p].value);break}if(p==n.data.length-1){t.changeSwitch(t.themeCode).change(a,n.data[0].value);break}}if(t.doNotSelectAnOption.control_add_to_cart){var h=t.getTranslation(t.doNotSelectAnOption.make_a_selection_text);h=h.replace(/{{\s*option_name\s*}}/gm,t.doNotSelectAnOption.option_name),t.disableAdd2CartButton(h,t.clientSpecs.getSelectors().add_to_cart_disabled_classes)}return"continue"}var g=t.uiElements.getViewByType(n.view_type_preset).getView(a,n),v=t.uiElements.renderNormal(a,g,j);1==n.data.length&&"null"==n.data[0].value&&v.length>0&&v[0].closest&&(v[0].closest("div.swatch-single").style.display="none"),M("Generated UI for - "+a);var f=r[a],m=!1;if(Object.entries(v).forEach(function(e){var a=_slicedToArray(e,2),r=a[0],s=a[1];if("length"!=r){var o=null;if(setTimeout(function(){var e="swatch-allow-animation";s.classList.add(e)},128),t.uiElements.isDropDown(s.tagName)){t.getLabelWidth(s,n.view_type_preset.params.padding_left),o=s.value;for(var c=s.querySelectorAll("option"),u=0;u<c.length;u++)c[u].getAttribute("value")==f&&(o=f,s.value=f)}else o=s.getAttribute("orig-value");if(o==f&&(m=!0,t.uiElements.isDropDown(s.tagName)?t.dispatchEvent("change",s):t.dispatchEvent("virtual_click",s)),r==v.length-1){var d=s.closest(".swatch-navigable, variant-swatch-king"),p=s.closest(".swatch-view-stack, variant-swatch-king");if(d&&"VARIANT-SWATCH-KING"!=d.tagName){d.querySelector(".swatch-navigation");var h=s.closest(".swatch-navigable");t.resSliderSize(h,n.view_type_preset.params,n.view_type_preset.assoc_view_type)}else if(p&&"VARIANT-SWATCH-KING"!=p.tagName){h=s.closest(".swatch-view-stack");t.resStackSize(h,n.view_type_preset.params,n.view_type_preset.assoc_view_type)}i="None",m||(t.uiElements.isDropDown(v[0].tagName)?t.dispatchEvent("change",v[0]):t.dispatchEvent("virtual_click",v[0]),l=!0)}}}),l)return"break"};e:for(var te,ie=Object.entries(s)[Symbol.iterator]();!(Z=(te=ie.next()).done);Z=!0){var ae,ne,re,se,oe;switch(ee()){case"continue":continue;case"break":break e}}}catch(le){Y=!0,Q=le}finally{try{!Z&&ie["return"]&&ie["return"]()}finally{if(Y)throw Q}}}}}}},{key:"resSliderSize",value:function(e,t,i){var a=this,n=window.matchMedia?window.matchMedia("screen and (max-width: 480px)"):screen.width<=480,r=e.closest(".swatch-navigable-wrapper"),s="li.swatch-view-item",o=e.querySelector("ul.swatch-view"),l=o.querySelectorAll(s).length,c=e.querySelector('[navigation="left"]'),u=e.querySelector('[navigation="right"]'),d=e.getBoundingClientRect().width,p=r?r.getBoundingClientRect().width:null,h=undefined,g=undefined,v=undefined,f=undefined,m=undefined,_=undefined,y=undefined,w=undefined,b=undefined,S=undefined,k=t.arrow_mode,A=(undefined,t.adjust_margin_right);n.matches&&(k=t.mobile_arrow_mode);var I=parseFloat(t.margin_right.match(/[\d\.]+/g));if("swatch-pill"==t.swatch_type||"button"==i)_=0,o.querySelectorAll(s).forEach(function(e,t){e.style.width=e.getBoundingClientRect().width+"px",_=_+e.getBoundingClientRect().width+I,e.firstChild.classList.contains("swatch-selected")&&(b=(_-e.getBoundingClientRect().width)/(.8*d),S=t),0==t&&(y=e.getBoundingClientRect().width),t==l-1&&(w=e.getBoundingClientRect().width,_-=I)});else{h=parseFloat(t.width.match(/[\d\.]+/g)),g=parseFloat(t.border_width.match(/[\d\.]+/g));var T=t.border_space||t.margin_swatch_horizontal;v=parseFloat(T.match(/[\d\.]+/g));var C=(d+I)/((f=h+2*g+2*v)+I);"mode_2"!=k&&"mode_3"!=k||(C=(p+I)/(f+I));var E=0;if(C>=l&&!A)E=parseInt(C);else{var x=t.last_swatch_preview;switch(n.matches&&(x=t.mobile_last_swatch_preview),x){case"full":C=(d+I)/(f+I),E=parseInt(C),I=(d-E*f)/(E>1?E-1:1);break;case"half":C=(d+f/2+I)/(f+I),E=parseInt(C)-1,I=(d-(E*f+f/2))/(E>1?E:1)}}m=E,_=(f+I)*l-I,o.querySelectorAll(s).forEach(function(e,t){e.firstChild instanceof Element&&e.firstChild.classList.contains("swatch-selected")&&(b=m>0?(f+I)*t/(m*(f+I)):0,"mode_1"==k&&(b=m>2?(f+I)*t/((m-2)*(f+I)):0),S=t),e.style.width=f+"px",t!=l-1&&(e.style.marginRight=I+"px")})}o.parentElement.setAttribute("swatch-slider","true");var D={swatchSliderItemWidth:f||0,totalScrollWidth:_,sliderWidth:d,visibleSwatches:m||0,marginRight:I,swatchType:t.swatch_type,firstSwatchWidth:y,lastSwatchWidth:w,assocViewType:i,arrowMode:k};o.style.transform="translateX(0px)",o.style.display="flex";var O=o.closest("[option-name]");return"mode_2"!=k&&"mode_3"!=k||(d=p),m>=l||d>=_?(c.classList.remove("star-show"),u.classList.remove("star-show"),"mode_2"!=k&&"mode_3"!=k||(e.classList.add("star-remove-margin"),D.sliderWidth=e.getBoundingClientRect().width),o.parentElement.setAttribute("data-slider-data",JSON.stringify(D)),!1):(u.classList.add("star-show"),u.classList.remove("star-disabled"),o.style.setProperty("justify-content","unset"),o.style.setProperty("width",_+"px","important"),"mode_2"==k||"mode_3"==k?(c.classList.add("star-show","star-disabled"),e.classList.remove("star-remove-margin"),D.sliderWidth=e.getBoundingClientRect().width):"mode_0"==k&&(c.classList.remove("star-show"),u.classList.remove("star-show")),b=parseInt(b),setTimeout(function(){for(var t=0;t<b;t++)a.clickToScroll(1,e.closest(".swatch-navigable"),!1);var i,r;n.matches&&(i=undefined,r=0,O&&O.id.includes("swatch-group")&&(o.querySelectorAll(s)[S].scrollIntoView(!1),document.body.scrollIntoView()),o.addEventListener("touchstart",function(e){i=e.touches[0].clientX,r=1}),o.addEventListener("touchmove",function(t){1==r&&(r+=1,i>=t.touches[0].clientX?a.clickToScroll(1,e.closest(".swatch-navigable")):a.clickToScroll(0,e.closest(".swatch-navigable")))}),o.addEventListener("touchend",function(){r=0}))},200),o.parentElement.setAttribute("data-slider-data",JSON.stringify(D)),!0)}},{key:"resStackSize",value:function(e,t,i){if("swatch-pill"!=t.swatch_type&&"button"!=i&&t.adjust_margin_right){var a=window.matchMedia?window.matchMedia("screen and (max-width: 480px)"):screen.width<=480,n=t.adjust_margin_right;if(a.matches&&(n=t.mobile_adjust_margin_right),n){var r=e.querySelector("ul.swatch-view");r&&(s="li.swatch-view-item",r.querySelectorAll(s).length,o=e.getBoundingClientRect().width,undefined,l=parseFloat(t.width.match(/[\d\.]+/g)),c=parseFloat(t.border_width.match(/[\d\.]+/g)),u=t.border_space||t.margin_swatch_horizontal,d=parseFloat(u.match(/[\d\.]+/g)),p=parseFloat(t.margin_right.match(/[\d\.]+/g)),h=parseInt((o+p)/(l+2*c+2*d+p)),r.querySelectorAll(s).forEach(function(e,t){(t+1)%h==0&&(e.style.marginRight=0)}))}}var s,o,l,c,u,d,p,h}},{key:"morphValues",value:function(e){return this.clientSpecs.getHandleize()?e=(e=(e=(e=(e=e.toLowerCase()).replace(RegExp("['\"\\(\\)\\{\\}\\[\\]]","gi"),"")).replace(RegExp("[^a-z0-9_]+","gi"),"-")).replace(RegExp("-+","gi"),"-")).replace(RegExp("^-|-$","gi"),""):e}},{key:"checkValidPrice",value:function(e,t){var i=arguments.length<=2||arguments[2]===undefined?null:arguments[2],a=arguments.length<=3||arguments[3]===undefined?null:arguments[3];return null==i?e[t]!=undefined:null==a?e[t][i]!=undefined:e[t][i]!=undefined&&e[t][i][a]!=undefined}},{key:"getOption1Price",value:function(e,t){return{min_price:e[t].min_price,max_price:e[t].max_price,is_equal:e[t].min_price==e[t].max_price}}},{key:"getOption2Price",value:function(e,t,i){return{min_price:e[t][i].min_price,max_price:e[t][i].max_price,is_equal:e[t][i].min_price==e[t][i].max_price}}},{key:"getOption3Price",value:function(e,t,i,a){return{min_price:e[t][i][a].min_price,max_price:e[t][i][a].max_price,is_equal:e[t][i][a].min_price==e[t][i][a].max_price}}},{key:"getOptionPriceInfo",value:function(e){var t=arguments.length<=1||arguments[1]===undefined?null:arguments[1],i=arguments.length<=2||arguments[2]===undefined?null:arguments[2];w=w?w.trim():this.multiLingualInfo.money_format.trim();var a=this.productInfoTree.getPriceInfoTree(),n=null;if(null==t)n=(o=this.getOption1Price(a,e)).is_equal?this.getMoneyWithFormat(w,o.min_price):this.getMoneyWithFormat(w,o.min_price)+"+";else if(null==i){if(this.checkValidPrice(a,e,t))n=(s=this.getOption2Price(a,e,t)).is_equal?this.getMoneyWithFormat(w,s.min_price):this.getMoneyWithFormat(w,s.min_price)+"+";else n=(o=this.getOption1Price(a,e)).is_equal?this.getMoneyWithFormat(w,o.min_price):this.getMoneyWithFormat(w,o.min_price)+"+"}else if(this.checkValidPrice(a,e,t,i)){var r=this.getOption3Price(a,e,t,i);n=r.is_equal?this.getMoneyWithFormat(w,r.min_price):this.getMoneyWithFormat(w,r.min_price)+"+"}else if(this.checkValidPrice(a,e,t)){var s;n=(s=this.getOption2Price(a,e,t)).is_equal?this.getMoneyWithFormat(w,s.min_price):this.getMoneyWithFormat(w,s.min_price)+"+"}else{var o;n=(o=this.getOption1Price(a,e)).is_equal?this.getMoneyWithFormat(w,o.min_price):this.getMoneyWithFormat(w,o.min_price)+"+"}return n}},{key:"updateSecondaryAndLastImage",value:function(e,t){return e.featured_image&&(e.featured_image.secondary_src=e.featured_image.src,e.featured_image.last_src=e.featured_image.src,void 0!==t&&t.length>1&&(e.featured_image.secondary_src=t[1],e.featured_image.last_src=t[t.length-1])),e}},{key:"processJSONInformation",value:function(e){var t=this,i=(arguments.length<=1||arguments[1]===undefined||arguments[1],e.options),a=e.variants,n=e.images,r={},s={};e.options_with_values&&(i=e.options_with_values);var o=this.getMultiLingualInfo().translation_status?this.getUntranslatedData():null,l=o?o.handle:null;this.productInfoTree.setProductInfo({id:e.id,handle:e.handle,untranslated_handle:l,vendor:e.vendor});var c=this.isInstanceTypeProduct()&&this.clientSpecs.getProductOptionsDisabled(),u=this.isInstanceTypeCollection()&&this.clientSpecs.getCollectionsOptionsDisabled();if(c||u)return this.hasOnlySingleVariant=!0,this.hasOnlyDefaultVariant=!0,void this.initialize();var d={},p=d;if(null!=i&&i!=undefined&&null!=a&&a!=undefined){if("undefined"!=typeof e.tags&&"all"!=this.clientSpecs.getAppExecutionStrategy()){var h=this.clientSpecs.getAppExecutionStrategy();if("enabled_except"==h&&e.tags.includes("vsk_disable"))return this.hasOnlyDefaultVariant=!0,void M("App won't run as vsk_disable is present in product tags with strategy enabled_except");if("disabled_except"==h&&!e.tags.includes("vsk_enable"))return this.hasOnlyDefaultVariant=!0,void M("App won't run as vsk_enable is not present in product tags with strategy disabled_except")}if(this.getMultiLingualInfo().translation_status&&null==this.getUntranslatedData())return"none"==this.getUntranslatedFetchStatus()&&this.fetchUntranslatedOptions(e.id),void setTimeout(function(){t.processJSONInformation(e)},200);if(1==a.length&&(this.hasOnlySingleVariant=!0,a[0].title.toLowerCase().includes("default")||e.has_only_default_variant))return this.hasOnlyDefaultVariant=!0,"undefined"==typeof a[0].merged_options&&this.setDataToSessionStorage(this.getSessionStorageKey(e.handle,!1,!1),e),void this.initialize();a.length>0&&"undefined"==typeof a[0].merged_options&&this.setDataToSessionStorage(this.getSessionStorageKey(e.handle,!1,!1),e);for(var g=0;g<i.length;g++){e.options_with_values&&i[g].label&&(i[g].name=i[g].label);var v=null;if(null!=o){var f=o.options[g].name;i[g].untranslated_name=f,v=this.clientSpecs.getViewTypeByOptionName(f,this.instanceType)}else{f=i[g].name;v=this.clientSpecs.getViewTypeByOptionName(f,this.instanceType)}i[g].view_type_preset=v}for(var m=null,_=null,y=0;y<n.length;y++){for(var w=y+1,b=0;b<a.length;b++){var S=a[b],k=S.featured_image;if(!k&&S.image&&(k=S.image),k){var A=parseInt(k.position);if(w==A){m=S.id,_=w;break}null!=m&&_==A&&(s[S.id]=s[m])}}if(null!=m){"undefined"==typeof s[m]&&(s[m]=[]);var I=n[y];"object"==typeof I&&(I=I.src),s[m].push(I)}}var T={},C={};for(g=0;g<a.length;g++){null==this.pInformation.first_or_available_variant&&(a[g].available?this.pInformation.first_or_available_variant=a[g]:g==a.length-1&&(this.pInformation.first_or_available_variant=a[0])),a[g]=this.updateSecondaryAndLastImage(a[g],s[a[g].id]),r[a[g].id]=a[g],d=p;for(var E=null,x=0;x<i.length;x++){var D="option"+(x+1),O=i[x].name,L=(v=i[x].view_type_preset,a[g].id);a[g][D]=this.morphValues(a[g][D]),a[g].options[x]=a[g][D];var N=a[g][D];d[D]==undefined&&(d[D]=[]);for(var P=!1,q=1,R=d[D].length,V=R-1;V>=0;V--){var F=d[D][V];if(F!=undefined&&(P=F.name==O&&F.value==a[g][D])){q=R-V;break}}if(P)null!=E&&(a[g].available&&(E.available=a[g].available),a[g].price>=0&&(E.min_price=E.min_price&&a[g].price>E.min_price?E.min_price:a[g].price,E.max_price=E.max_price&&a[g].price<E.max_price?E.max_price:a[g].price));else{var H={};if(H.name=O,H.untranslated_name=i[x].untranslated_name,H.value=a[g][D],H.original_value=N,H.view_type_preset=v,H.available=!1,null!=o&&(H.untranslated_value=o.variants[g].selectedOptions[x].value),this.uiElements.isASwatch(v.assoc_view_type)&&(H.featured_image=a[g].featured_image,!H.featured_image&&a[g].image&&(H.featured_image=a[g].image),H.featured_image)){H.featured_image.secondary_src=H.featured_image.src,H.featured_image.last_src=H.featured_image.src;var j=s[a[g].id];void 0!==j&&j.length>1&&(H.featured_image.secondary_src=j[1],H.featured_image.last_src=j[j.length-1])}null!=E&&a[g].available&&(E.available=a[g].available),null!=E&&a[g].price>=0&&(E.min_price=E.min_price&&a[g].price>E.min_price?E.min_price:a[g].price,E.max_price=E.max_price&&a[g].price<E.max_price?E.max_price:a[g].price),x==i.length-1&&(H.variant_id=L,H.available=a[g].available,H.min_price=a[g].price,H.max_price=a[g].price),d[D].push(H)}E=d=d[D][d[D].length-q]}C=T;var U=a[g].options;for(x=0;x<U.length;x++){var G=U[x];C[G]==undefined&&(C[G]={min_price:a[g].price,max_price:a[g].price}),C[G].min_price=Math.min(C[G].min_price,a[g].price),C[G].max_price=Math.max(C[G].max_price,a[g].price),C=C[G]}}var W=e.featured_image;!W&&e.images&&e.images.length>0&&(W=e.images[0]),W&&"object"==typeof W&&(W=W.src),this.isInstanceTypeCollection()&&(this.currentDocument.hasAttribute("swatch-default-variant")?(this.pInformation.preselect_variant=this.currentDocument.getAttribute("swatch-default-variant"),this.currentDocument.removeAttribute("swatch-default-variant")):this.clientSpecs.getCollectionPreselectVariant()&&(this.pInformation.preselect_variant=this.pInformation.first_or_available_variant.id)),this.uiElements.setDefaultFeaturedImage(W),this.productInfoTree.setValues(p,i,r,T),M(["Processed JS data structure",this.productInfoTree])}else e.handle&&""!=e.handle&&this.executeFetch({url:this.getMultiLingualInfo().current_url+"/collections/all/products/"+e.handle+".js",path_name:null,allow_processing:!1,callback:function(e){t.processJSONInformation(e)},translation_request:!1})}},{key:"hideFormElements",value:function(e,t){t&&this.currentDocument.querySelectorAll(e).forEach(function(e){e.parentNode.style.display="none"});this.uiElements.hideElementStyles(e)}},{key:"retryFetchInformationFromJs",value:function(e){var t=this;setTimeout(function(){t.fetchInformationFromJs()},e)}},{key:"fetchInformationFromJs",value:function(){var e=this;if(this.isInstanceTypeCollection()){var t=this.getProductHandleFromScope();t&&(this.processJSONInformation({id:"0",title:"",handle:decodeURI(t)}),this.currentDocument.setAttribute("swatch-generated",t))}else{var i=window.decodeURI(window.location.pathname.replace(/\/$/,"")),a=i.includes("/products"),n=null;if("sectioned"==this.instanceSubType&&!this.isSectionPrimary?(n=this.getProductHandleFromScope(),this.currentDocument.setAttribute("swatch-generated",n)):this.isSectionPrimary&&this.currentDocument.setAttribute("swatch-generated",i),"quick_view"!=this.instanceSubType){if(a&&!n){if("pending"==window.starAppsStudioJSDataRequest)return void this.retryFetchInformationFromJs(100);if("undefined"!=typeof window.starAppsStudioJSData&&window.starAppsStudioJSDataURL==i)return void setTimeout(function(){window.starAppsStudioJSDataRequest="complete",e.processJSONInformation(window.starAppsStudioJSData)},100);window.starAppsStudioJSDataRequest="pending"}if(a||n){var r=undefined;r=n?this.getMultiLingualInfo().current_url+"/products/"+n+".js":i+".js",M("JS data fetch request initiated for URL: "+r),this.executeFetch({url:r,path_name:a&&!n?i:null,allow_processing:!0,callback:null,translation_request:!1})}else this.productUndefined=!0}}}},{key:"executeFetch",value:function(e,t){var i,a=this,n=e.url,r=e.path_name,s=e.allow_processing,o=e.callback,l=e.translation_request,c=this.getDataFromSessionStorage(this.getSessionStorageKey(n,!0,l));!c||t?window.fetch?fetch(n).then(function(e){return e.json()}).then(function(e){r&&(window.starAppsStudioJSDataRequest="complete",window.starAppsStudioJSDataURL=r,window.starAppsStudioJSData=e),s&&(a.processJSONInformation(e),M("JS data fetch request finished")),o&&o.call(a,e)}):((i=new XMLHttpRequest).open("GET",n,!0),i.onload=function(){if(i.status>=200&&i.status<400){var e=JSON.parse(i.responseText);r&&(window.starAppsStudioJSDataRequest="complete",window.starAppsStudioJSDataURL=r,window.starAppsStudioJSData=e),s&&(this.processJSONInformation(e),M("JS data fetch request finished")),o&&o.call(this,e)}}.bind(a),i.send()):null!==c.id&&(r&&(window.starAppsStudioJSDataRequest="complete",window.starAppsStudioJSDataURL=r,window.starAppsStudioJSData=c),s&&(this.processJSONInformation(c),M("JS data fetch request finished")),o&&o.call(this,c))}},{key:"executeStorefrontFetch",value:function(e){var t,i=this,a=e.callback,n=g+"api/"+c+"/graphql.json",r=e.query,s={method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":this.clientSpecs.storefront_access_token},body:JSON.stringify({query:r})};window.fetch?fetch(n,s).then(function(e){return e.json()}).then(function(e){a&&a.call(i,e.data,e.extensions)}):((t=new XMLHttpRequest).open("POST",n,!0),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("X-Shopify-Storefront-Access-Token",i.storefront_access_token),t.onload=function(){if(t.status>=200&&t.status<400){var e=JSON.parse(t.responseText);a&&a.call(this,e.data,e.extensions)}}.bind(i),t.send(JSON.stringify({query:r})))}},{key:"initialize",value:function(){var e=this;if(M("Hey! I have started working with setting - "+this.themeCode),!this.eventsRegistered){var t=function(){var t=["click","change","virtual_click","keyup"];e.isInstanceTypeCollection()&&x.switch_on_hover&&(t.push("mouseover"),t.push("mouseout"));var i=e.getCorrectSwatchRoot(),a=null;if(e.isInstanceTypeProduct()&&e.groupsDisplaySelector&&(a=e.getCorrectSwatchRoot("groups")),!i&&!a)return setTimeout(e.initialize.bind(e),250),{v:undefined};Object.entries(t).forEach(function(t){var n=_slicedToArray(t,2),r=n[0],s=n[1];"length"!=r&&(i&&i.addEventListener(s,e.generateUISwitch()),a?a.addEventListener(s,e.generateUISwitch()):e.groupsDisplaySelector=null)}),window.addEventListener("resize",function(){if(this.isInstanceTypeCollection()){var e=this.currentDocument.querySelector("div.swatches-type-collections");if(e){var t=e.parentNode.parentNode;e.style.width=t.offsetWidth+"px"}}}.bind(e)),e.eventsRegistered=!0,e.generateProductGroups()}();if("object"==typeof t)return t.v}!p&&this.isInstanceTypeCollection()&&(this.hideFormElements(this.getInstanceConfig().selectors_to_hide,!1),p=!0),d||(window.document.addEventListener("click",function(e){var t=e.target;t.hasAttribute("swatch-inside")&&(t=t.parentNode);for(var i=document.querySelectorAll("ul.swatch-drop-down-list:not(.swatch-hide)"),a=0;a<i.length;a++){var n=i[a],r=n.parentNode.querySelector('[type="select"]');t!=r&&(r.setAttribute("aria-expanded",!1),n.classList.add("swatch-hide"))}}),d=!0),M("Generating swatch UI..."),this.generateUISwitch()()}},{key:"readyToInit",value:function(){return null!=this.productInfoTree.getTree()}},{key:"detectAndInitialize",value:function(){var e=!(arguments.length<=0||arguments[0]===undefined)&&arguments[0],t=null,i=null;this.clientSpecs.getThemeType()&&""!=this.clientSpecs.getThemeType()&&(t=this.clientSpecs.getThemeType()),this.clientSpecs.getSelectors().option_selectors&&""!=this.clientSpecs.getSelectors().option_selectors.trim()&&(i=this.clientSpecs.getSelectors().option_selectors),this.hasOnlySingleVariant&&V()&&e&&(t="motion",i='[name="id"]');var a=[{theme_type:"common",option_selector:'select[class*="single-option-selector"]',hide_elements:'select.single-option-selector, select[id*="SingleOptionSelector"]'},{theme_type:"common",option_selector:'select[id*="SingleOptionSelector"]',hide_elements:'select.single-option-selector, select[id*="SingleOptionSelector"]'},{theme_type:"common",option_selector:".option-selectors select",hide_elements:".option-selectors"},{theme_type:"common",option_selector:".option-values select",hide_elements:".option-values.option-values-select .form-element-wrapper"},{theme_type:"brooklyn",option_selector:".single-option-radio input.single-option-selector__radio",hide_elements:".radio-wrapper.js, form .radio-wrapper"},{theme_type:"brooklyn",option_selector:".single-option-radio input.single-option-selector-product-template",hide_elements:".radio-wrapper.js, form .radio-wrapper"},{theme_type:"brooklyn",option_selector:'form input[class*="variant__input"]',hide_elements:"form .variant-wrapper.variant-wrapper--button.js, form .variant-wrapper .variant-input-wrap, form .variant-wrapper .variant__label"},{theme_type:"prestige",option_selector:'input[data-option-position][type="radio"], button[data-option-position][type="button"], div[data-option-position][data-option-value]',hide_elements:'form[action*="/cart/add"] .ProductForm__Option, form[action*="/cart/add"] .product-form__option'},{theme_type:"empire",option_selector:'form[action*="/cart/add"] .form-options .form-field-select[data-product-option]',hide_elements:'form[action*="/cart/add"] .form-field.form-options'},{theme_type:"dawn",option_selector:"variant-radios input",hide_elements:"variant-radios"},{theme_type:"dawn",option_selector:"fieldset.variants-ui__radios input.option-value-input",hide_elements:"fieldset.variants-ui__radios"},{theme_type:"motion",option_selector:"select.product-single__variants",hide_elements:"noelement"}],n=null,r=!!t;if(!!i){if(!this.currentDocument.querySelector(i))throw M("option_selectors is defined and selector was not found!"),"SelectorNotFoundException";n={theme_type:r?t:"common",option_selector:i,hide_elements:"noelement"}}else for(var s=0;s<a.length;s++){var o=a[s];if(r){if(o.theme_type!=t)continue;M("theme_type("+t+") is defined, Looking for its selector...")}if(this.currentDocument.querySelector(o.option_selector)){n=o;break}if(s==a.length-1)throw"SelectorNotFoundException"}if(!n)throw"SelectorNotFoundException";if(this.getCorrectSwatchRoot()){if(this.themeSupportConfig={option_selector:n.option_selector,hide_elements:n.hide_elements+", "+n.option_selector,deferred:!!n.deferred,key_mapping:{},index_strategy:null},this.clientSpecs.getProductSettings().init_deferred&&(this.themeSupportConfig.deferred=this.clientSpecs.getProductSettings().init_deferred),this.themeCode=n.theme_type,"brooklyn"==this.themeCode||"impulse"==this.themeCode){this.themeCode="brooklyn";var l=this.currentDocument.querySelector(this.themeSupportConfig.option_selector),c=this.clientSpecs.getSelectors().option_index_attributes;this.themeSupportConfig.strategy="type1";for(var u=0;u<c.length;u++)if(l.hasAttribute(c[u])){var d=l.getAttribute(c[u]);if((d=RegExp("(?:(?:option[^\\d\\s]*)(\\d+))|(^\\d+$)","gi").exec(d))&&d[1]?d=d[1]:d&&d[2]&&(d=d[2]),"option0"==(d="option"+d)){
this.themeSupportConfig.attribute_name=c[u],this.themeSupportConfig.strategy="type0";break}if("option1"==d){this.themeSupportConfig.attribute_name=c[u];break}}M(this.themeSupportConfig),"undefined"==typeof this.themeSupportConfig.attribute_name&&console.log("Swatch King:","Theme type doesn't have a attribute_name")}""!=this.clientSpecs.getSelectors().selectors_to_hide_override?this.hideFormElements(this.clientSpecs.getSelectors().selectors_to_hide_override,!1):(this.hideFormElements(this.themeSupportConfig.hide_elements,"common"==this.themeCode),this.hideFormElements(this.clientSpecs.getSelectors().selectors_to_hide,!1)),this.preInitialize()}else console.log("Swatch King:","We cannot find any swatch display location, please get in touch with us at support@starapps.studio")}},{key:"preInitialize",value:function(){!this.themeSupportConfig.deferred||V()?this.initialize():setTimeout(this.preInitialize.bind(this),250)}},{key:"onInstanceActivate",value:function(){var e=this,t=0,i=setInterval(function(){try{if(e.readyToInit()){M("Starting operations...");var a=t>0;e.detectAndInitialize(a),R(i)}else e.productUndefined&&(M("Product not found!"),R(i))}catch(n){M(["Loading Failed... Retrying.",n]),V()&&t>=3?R(i):V()&&"SelectorNotFoundException"==n&&t++}},250)}}]),e}(),O=function(){function e(){_classCallCheck(this,e),this.tree=null,this.options=null,this.variants=null,this.variantsKeys=null,this.productInfo=null,this.priceInfoTree=null}return _createClass(e,[{key:"getVariantInfoFromOptions",value:function(e){for(var t=Object.keys(e),i=this.getVariantsKeys(),a=this.getVariants(),n=!1,r=null,s=0;s<i.length;s++){for(var o=a[i[s]],l=!0,c=0;c<t.length;c++){if(e[t[c]]!=o.options[c]){l=!1;break}n=!0,r=o}if(l)return o}return n?r:null}},{key:"getNodeByOptions",value:function(e,t,i){for(var a=this.tree,n=null,r={},s=Object.keys(e),o=0;o<s.length;o++){var l=s[o],c=!1;if(a[l]!=undefined){a=a[l];for(var u=0;u<a.length;u++){r[l]==undefined&&(r[l]={available_count:0,data:[],name:a[u].name,untranslated_name:a[u].untranslated_name,view_type_preset:a[u].view_type_preset});var d={value:a[u].value,original_value:a[u].original_value,untranslated_value:a[u].untranslated_value};a[u].featured_image!=undefined&&(d.featured_image=a[u].featured_image),a[u].available!=undefined&&(d.available=a[u].available,d.available&&(r[l].available_count+=1)),a[u].min_price!=undefined&&a[u].max_price!=undefined&&(a[u].min_price==a[u].max_price?d.price=i(t,a[u].min_price):d.price=i(t,a[u].min_price)+"+"),r[l].data.push(d),a[u].value==e[l]?(n=a[u],c=!0):c||u!=a.length-1||(n=a[0])}a=n}}return r}},{key:"getTree",value:function(){return this.tree}},{key:"getOptions",value:function(){return this.options}},{key:"getOptionNameByKey",value:function(e){for(var t=0;t<this.options.length;t++){if("option"+(t+1)==e)return this.options[t].name}return""}},{key:"getOptionKeyByName",value:function(e,t,i,a){for(var n=RegExp("(?:(?:optio.*?\\D)([0-3])(?:\\D|$))|(?:^([0-3])$)|(?:\\D([0-3])$)|(?:^([0-3])\\D)|(?:\\D([0-3])\\D)","gi"),r=null,s=5,o=s,l=null;null!==(l=n.exec(e));){l.index===n.lastIndex&&n.lastIndex++;for(var c=1;c<=s;c++)l[c]&&c<=o&&(r=l[c],o=c)}var u=null;for(c=0;c<this.options.length;c++){var d=this.options[c],p=d.name;if(r){var h=parseInt(r),g=o<4;if(i&&g&&"zeroed"==i){u="option"+(h+1);break}if(i&&g){u="option"+h;break}for(var v=0;v<d.values.length;v++){if(t==a(d.values[v])){g?c==h?(i="zeroed",u="option"+(h+1)):(i="oned",u="option"+h):u="option"+(c+1);break}}}else if(!this.options[c].is_iterated){var f=p.replace(RegExp("(?:\\[|\\]|\\(|\\)|\\+|\\$)","gi"),"\\$&{0,1}");if(f=f.replace(RegExp("\\s","gi"),"[\\s\\+\\-]{0,1}"),RegExp("(?:"+f+")","gi").exec(e)){for(v=0;v<d.values.length;v++){if(t==a(d.values[v])){u="option"+(c+1),this.options[c].is_iterated=!0;break}}if(u)break}}}return[u,i]}},{key:"getVariants",value:function(){return this.variants}},{key:"getVariantsKeys",value:function(){return this.variantsKeys}},{key:"getProductInfo",value:function(){return this.productInfo}},{key:"getUntranslatedProductHandle",value:function(){return this.productInfo.untranslated_handle}},{key:"setProductInfo",value:function(e){this.productInfo=e}},{key:"getPriceInfoTree",value:function(){return this.priceInfoTree}},{key:"setValues",value:function(e,t,i,a){this.tree=e,this.options=t,this.variants=i,this.variantsKeys=Object.keys(i),this.priceInfoTree=a}}]),e}(),L=function(){function e(){_classCallCheck(this,e),this.app_setting=_.app_setting,this.app_setting_styles=_.app_setting_styles,this.app_setting_config=_.app_setting_config,this.theme_setting=y,this.options=_.product_options,this.presets=_.presets,this.presetsMap={},this.default_language=_.primary_locale,this.default_currency=_.currency,this.lambda_cloudfront_url=_.lambda_cloudfront_url,this.data_url_source=_.data_url_source,this.localized_strings=_.localized_string,this.storefront_access_token=_.storefront_key}return _createClass(e,[{key:"getGroupsEnableOnHomeFeaturedProduct",value:function(){return b&&this.app_setting_config.enable_swatch.home.enable_on_home_featured_product.group_swatches}},{key:"getVariantsEnableOnHomeFeaturedProduct",value:function(){return b&&this.app_setting_config.enable_swatch.home.enable_on_home_featured_product.variant_swatches}},{key:"getGroupsEnableOnCollectionQuickView",value:function(){return k&&this.app_setting_config.enable_swatch.collections.enable_on_collection_quick_view.group_swatches}},{key:"getVariantsEnableOnCollectionQuickView",value:function(){return k&&this.app_setting_config.enable_swatch.collections.enable_on_collection_quick_view.variant_swatches}},{key:"getGroupsEnableOnMainProduct",value:function(){return I&&this.app_setting_config.enable_swatch.products.enable_on_main_product.group_swatches}},{key:"getVariantsEnableOnMainProduct",value:function(){return I&&this.app_setting_config.enable_swatch.products.enable_on_main_product.variant_swatches}},{key:"getGroupsEnableOnCustomFeaturedProduct",value:function(){return C&&this.app_setting_config.enable_swatch.pages.enable_on_custom_featured_product.group_swatches}},{key:"getVariantsEnableOnCustomFeaturedProduct",value:function(){return C&&this.app_setting_config.enable_swatch.pages.enable_on_custom_featured_product.variant_swatches}},{key:"getGroupsEnableStatusForProductType",value:function(){return this.getGroupsEnableOnHomeFeaturedProduct()||this.getGroupsEnableOnCollectionQuickView()||this.getGroupsEnableOnMainProduct()||this.getGroupsEnableOnCustomFeaturedProduct()}},{key:"getVariantsEnableStatusForProductType",value:function(){return this.getVariantsEnableOnHomeFeaturedProduct()||this.getVariantsEnableOnCollectionQuickView()||this.getVariantsEnableOnMainProduct()||this.getVariantsEnableOnCustomFeaturedProduct()}},{key:"getEnableStatusForProductGridType",value:function(){return S||A||T||E}},{key:"getSwatchPresentation",value:function(e){return this.app_setting_styles[e+"_swatch_presentation"]}},{key:"getViewStyle",value:function(e){return this.app_setting_styles[e]}},{key:"getViewDefault",value:function(e){var t=this,i="products"==e,a=i?this.presets[this.app_setting.default_preset]:undefined;return void 0===a&&i?Object.entries(this.presets).forEach(function(i){var n=_slicedToArray(i,2),r=n[0],s=n[1];"button"==s.assoc_view_type&&s.apply_to==e&&(t.app_setting.default_preset=r,a=s)}):"collections"==e&&(a=this.getHiddenPreset()),a}},{key:"getSelectors",value:function(){return this.theme_setting.configurations.products}},{key:"getProductSettings",value:function(){return this.theme_setting.settings.products}},{key:"getHandleize",value:function(){return this.theme_setting.settings.products.handleize}},{key:"getThemeType",value:function(){return this.theme_setting.configurations.products.theme_type}},{key:"getStyles",value:function(){return this.app_setting_styles}},{key:"getHiddenPreset",value:function(){return{assoc_view_type:"hidden"}}},{key:"getViewTypeByGroup",value:function(e,t){var i=null;if("products"==t)i=this.presets[e.products_preset_id];else if("collections"==t){var a=e.collections_preset_id;i=null==a||"0"==a.toString()?this.getHiddenPreset():this.presets[a]}return void 0!==i?Object.assign({products_swatch:e.products_swatch,collections_swatch:e.collections_swatch},i):Object.assign({products_image_source:e.products_image_source,collections_image_source:e.collections_image_source,variant_image_type:e.variant_image_type},this.getViewDefault(t))}},{key:"getViewTypeByOptionName",value:function(e,t){if("undefined"!=typeof this.presetsMap[e])return this.presetsMap[e];for(var i=this.getViewDefault(t),a=null,n=0;n<this.options.length;n++){var r=this.options[n],s=null;if("products"==t)s=this.presets[r.products_preset_id];else if("collections"==t){var o=r.collections_preset_id;s=null==o||"0"==o.toString()?this.getHiddenPreset():this.presets[o]}s=void 0!==s?Object.assign({trigger_action:r.trigger_action,products_swatch:r.products_swatch,collections_swatch:r.collections_swatch},s):Object.assign({trigger_action:r.trigger_action},i),this.presetsMap[r.name]=s,this.options[n].name==e&&(a=s)}return a||i}},{key:"getTriggerActionByOptionName",value:function(e){if("undefined"!=typeof this.presetsMap[e])return this.presetsMap[e].trigger_action;for(var t=0;t<this.options.length;t++)if(this.presetsMap[this.options[t].name]=this.options[t],this.options[t].name==e)return this.options[t].trigger_action;return"auto"}},{key:"getOptions",value:function(){return this.options}},{key:"getCustomStyle",value:function(){if(""!=this.theme_setting.custom_css)return'<style type="text/css" app="vsk" role="custom-css">'+this.theme_setting.custom_css+"</style>"}},{key:"getCustomScripts",value:function(){var e=this.theme_setting.custom_scripts;if(0!=e.length){for(var t="",i=0;i<e.length;i++)t+=e[i].script;return t}}},{key:"getDoNotSelectAnOption",value:function(){return this.app_setting_config.do_not_select_an_option}},{key:"getAllOptionsData",value:function(){return{variantId:null}}},{key:"getDisplayLogs",value:function(){return this.app_setting.display_logs}},{key:"getCollectionConfig",value:function(){return this.theme_setting.configurations.collections}},{key:"getCollectionSettings",value:function(){return this.theme_setting.settings.collections}},{key:"getCustomButtonParams",value:function(){return this.theme_setting.configurations.products.custom_button_params}},{key:"getAppExecutionStrategy",value:function(){return this.app_setting_config.app_execution_strategy}},{key:"getProductOptionsDisabled",value:function(){return this.app_setting_config.products_options_disabled}},{key:"getCollectionsOptionsDisabled",value:function(){return this.app_setting_config.collections_options_disabled}},{key:"getDefaultSwatchImage",value:function(){return this.app_setting_config.default_swatch_image}},{key:"getPersistGroupVariant",value:function(){return this.theme_setting.settings.products.persist_group_variant}},{key:"getCollectionPreselectVariant",value:function(){return x.preselect_variant}},{key:"hideSingleValueOption",value:function(e){return this.theme_setting.settings[e].hide_single_value_option}},{key:"getSizeChartSelector",value:function(){return this.theme_setting.settings.products.size_chart_selector}},{key:"getSizeChartConfig",value:function(){return this.app_setting_config.size_chart}},{key:"getNoTranslate",value:function(){return!!this.app_setting_config.notranslate}},{key:"getLocalizedStrings",value:function(){return this.localized_strings}},{key:"getSwatchUrlSource",value:function(){return this.app_setting.swatch_url_source}},{key:"getDataUrlSource",value:function(){return this.data_url_source}},{key:"getLambdaCloudFrontUrl",value:function(){return this.lambda_cloudfront_url}},{key:"getSwatchUrlHost",value:function(){return"cdn"==this.app_setting.swatch_url_source?"cdn.starapps.studio/v2":"media-cdn.starapps.studio"}},{key:"getDefaultCurrency",value:function(){return this.default_currency}},{key:"getDefaultLanguage",value:function(){return this.default_language}},{key:"getHistoryFreeGroupNavigation",value:function(){return this.app_setting_config.history_free_group_navigation}}]),e}(),N=function(){function e(t,i,a){_classCallCheck(this,e),this.instanceType=t,this.clientSpecs=i,this.currentDocument=a,this.storeSlug=window.Shopify.shop.split(".myshopify.com")[0],this.swatchDir=_.swatch_dir,this.preservedState={},this.defaultFeaturedImage=null,this.viewTypes=null,this.isSwatchRootDisplayed={options:!1,groups:!1},this.selectedSwatches={}}return _createClass(e,[{key:"setPreservedState",value:function(e,t,i){"undefined"==typeof this.preservedState[e]&&(this.preservedState[e]={}),this.preservedState[e][t]=i}},{key:"getPreservedState",value:function(e,t){if("undefined"!=typeof this.preservedState[e]){var i=this.preservedState[e];if("undefined"!=typeof i[t])return i[t]}return null}},{key:"isInstanceTypeProduct",value:function(){return"products"==this.instanceType}},{key:"isInstanceTypeCollection",value:function(){return"collections"==this.instanceType}},{key:"getSwatchPresentation",value:function(){return this.isInstanceTypeProduct()?this.clientSpecs.getSwatchPresentation("products"):this.isInstanceTypeCollection()?this.clientSpecs.getSwatchPresentation("collections"):void 0}},{key:"getSwatchSlideStyleHTML",value:function(e){return'<div class="swatch-navigation-wrapper" navigation="'+e+'"><div class="swatch-navigation" data-navigation="'+e+'" role="presentation" tabindex="0">\n        '+("left"==e?this.getLeftNavigationSVG():this.getRightNavigationSVG())+"\n        </div></div>"}},{key:"getRightNavigationSVG",value:function(){return""!=this.getSwatchPresentation().slide_right_button_svg?this.getSwatchPresentation().slide_right_button_svg.replace(RegExp("<[a-z]+","gi"),' swatch-inside="true"'):'<svg viewBox="0 0 24 24" focusable="false" swatch-inside="true" style="enable-background:new 0 0 477.175 477.175;" xml:space="preserve"><path swatch-inside="true" d="M0 0h24v24H0z" fill="none"></path><path swatch-inside="true" d="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z"></path></svg>'}},{key:"getLeftNavigationSVG",value:function(){return""!=this.getSwatchPresentation().slide_left_button_svg?this.getSwatchPresentation().slide_left_button_svg.replace(RegExp("<[a-z]+","gi"),' swatch-inside="true"'):'<svg viewBox="0 0 24 24" focusable="false" swatch-inside="true" style="enable-background:new 0 0 477.175 477.175;" xml:space="preserve"><path swatch-inside="true" d="M0 0h24v24H0z" fill="none"></path><path swatch-inside="true" d="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z"></path></svg>'}},{key:"getMinifiedHTML",value:function(e,t,i){e=this.cvt2HTMLEntities(e);var a=this.clientSpecs.getSwatchPresentation("collections").minified_template;a=(a=(a=(a=a.replace(RegExp("{count}","gi"),t)).replace(RegExp("{option_name}","gi"),e)).replace(RegExp("{product_id}","gi"),i.id)).replace(RegExp("{product_handle}","gi"),i.handle);var n=g;return n&&""!=n&&(n=n.replace(/\/$/,"")),a=a.replace(RegExp("{routes_root}","gi"),n),this.parseHTML('<li class="swatch-view-item swatch-minified-text" orig-value="'+e+'">'+a+"</li>")[0]}},{key:"parseHTML",value:function(e){var t=document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t.body.children}},{key:"decodeHTML",value:function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}},{key:"setDefaultFeaturedImage",value:function(e){var t=this.clientSpecs.getDefaultSwatchImage();this.defaultFeaturedImage=t||e}},{key:"hideElementStyles",value:function(e){var t=document.querySelector('style[app="vsk"][role="hide_elements"]'),i="";if("object"==typeof e||"array"==typeof e)for(var a=0;a<e.length;a++)i+=e[a],a<e.length-1&&(i+=",");else"string"==typeof e&&(i=e);""!=i.trim()&&(t?t.innerHTML+=i+"{display: none!important;}":(i='<style type="text/css" app="vsk" role="hide_elements">'+i+"{display: none!important;}</style>",document.querySelector("head").appendChild(this.parseHTML(i)[0])))}},{key:"getStyleProps",value:function(){if(this.isInstanceTypeCollection()){var e=this.currentDocument.querySelector("variant-swatch-king").parentNode.getBoundingClientRect().width;return'style="width: '+(e?e+"px":"100%")+"; z-index: "+this.clientSpecs.getCollectionSettings().layer_index+';"'}return""}},{key:"getSwatchRoot",value:function(e){var t=this.isInstanceTypeProduct()&&!!this.clientSpecs.getSizeChartSelector(),i=this.clientSpecs.getSizeChartConfig(),a="undefined"==typeof window.matchMedia||window.matchMedia("(hover: hover)").matches,n=this.clientSpecs.getNoTranslate(),r="";r+='<div class="swatches swatches-type-'+this.instanceType+" "+(a?"hover-enabled":"hover-disabled")+(n?" notranslate":"")+'" '+this.getStyleProps()+'>\n        <div sa-group-position="top"></div><div sa-options-position="default">';for(var s=0;s<e.length;s++){var o=this.isInstanceTypeProduct()?'id="swatch-option'+(s+1)+'"':"",l="swatch-hide",c=e[s].untranslated_name?e[s].untranslated_name:e[s].name;c=this.cvt2HTMLEntities(c.trim());var u="";t&&-1!=i.labels.indexOf(c+",")&&(u+='<span class="swatch-size-chart"></span>'),"all"==this.clientSpecs.hideSingleValueOption(this.instanceType)&&e[s].values.length<=1&&(l+=" option-single-value"),r+="<div "+o+' option-name="'+c+'" option-target="option'+(s+1)+'" class="'+l+'">\n            '+u+"\n            </div>"}return r+='</div><div sa-group-position="bottom"></div>'}},{key:"renderSwatchRoot",value:function(e,t){var i=this,a=arguments.length<=2||arguments[2]===undefined?"options":arguments[2];if(!this.isSwatchRootDisplayed[a]){var n=t.querySelector(".swatches.swatches-type-"+this.instanceType);if(n&&n.querySelector("[option-target]")&&n.parentNode.removeChild(n),t.innerHTML=e,this.isInstanceTypeProduct()){var r=[{type:"size_chart",append_to:"span.swatch-size-chart",element_selector:this.clientSpecs.getSizeChartSelector()}];Object.entries(r).forEach(function(e){var t,a,n,r=_slicedToArray(e,2),s=(r[0],r[1]),o=s.append_to,l=s.element_selector;l&&(n=i.currentDocument.querySelector(o))&&(t=5e3,a=setInterval(function(){t-=250;var e=document.querySelector(l);e?(n.appendChild(e),clearInterval(a)):t<=0&&clearInterval(a)},250))})}this.isSwatchRootDisplayed[a]=!0}}},{key:"renderNormal",value:function(e,t,i){var a=i.querySelector('[option-target="'+e+'"]'),n=a.querySelector(".swatch-single");n&&a.removeChild(n);var r=this.parseHTML(t)[0];return a.appendChild(r),a.classList.remove("swatch-hide"),a.querySelectorAll(".swatch-selector")}},{key:"getFlexibleSize",value:function(e){e=parseInt(e.replace("px",""));var t=window.innerWidth,i=t/500;return t>=992&&(i=.4*t/500),i=Math.max(i,.75),e*(i=Math.min(i,1.25))+"px"}},{key:"getLazyResolution",value:function(e,t,i,a){var n=!0;"cover"!=i&&"contain"!=i||("contain"==i&&(n=!1),i="100%"),i=parseInt(i.replace("%","")),i*=2;var r="center";a&&(r=a);var s="&format=pjpg",o="width="+parseInt(t[0].replace("px",""))*(i/100)+"&height="+parseInt(t[1].replace("px",""))*(i/100)+(n?"&crop="+r:"");return o=e.includes("?")?"&"+o:"?"+o,e.match(/(\.jpg)(?=$|\?)/gm)&&(o+=s),e+o}},{key:"getViewByType",value:function(e){var t=null,i={getView:null};switch(e.assoc_view_type){case"swatch":t=e[this.instanceType+"_swatch"],i.getView="custom_swatch"==t?this.getCustomImageView.bind(this,e):this.getVariantImageView.bind(this,e);break;case"drop_down":i.getView=this.getDropDownView.bind(this,e);break;case"swatch_drop_down":i.getView=this.getDropDownViewCustom.bind(this,e);break;case"button":i.getView=this.getButtonView.bind(this,e);break;case"hidden":i.getView=this.getHiddenView.bind(this,e)}return i}},{key:"cvt2HTMLEntities",value:function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}},{key:"displayLabel",value:function(){var e=arguments.length<=0||arguments[0]===undefined?null:arguments[0];return this.isInstanceTypeCollection()?this.clientSpecs.getCollectionSettings().display_label:!e||!e.params||e.params.display_label===undefined||e.params.display_label}},{key:"isValueMorphed",value:function(){return!!this.clientSpecs.getHandleize()}},{key:"isASwatch",value:function(e){return"swatch"==e||"swatch_drop_down"==e}},{key:"displayAlignment",value:function(){var e=arguments.length<=0||arguments[0]===undefined?"swatch-view-stack":arguments[0];return this.isInstanceTypeCollection()?"swatch-view-stack"==e?"swatch-align-"+x.alignment:"swatch-slider-align-"+x.alignment:""}},{key:"getImageType",value:function(e,t){var i=undefined;return(i=["second_product_image","second_variant_image"].includes(t)?e.secondary_src:["last_product_image","last_variant_image"].includes(t)?e.last_src:e.src)||(i=e.src),i}},{key:"getImageSrc",value:function(e,t,i){var a=null;return this.isInstanceTypeCollection()?a=this.getImageType(e,i):this.isInstanceTypeProduct()&&(a=this.getImageType(e,t)),a}},{key:"getVariantImageView",value:function(e,t,i){var a=window.matchMedia?window.matchMedia("screen and (max-width: 480px)"):screen.width<=480,n="swatch-view-"+e.params.swatch_style;a.matches&&(n="swatch-view-"+e.params.mobile_swatch_style);var r="undefined"!=typeof i.product_group_index,s=r?'data-group-index="'+i.product_group_index+'"':"",o='<div class="swatch-single swatch-preset-'+e.id+" "+n+'" '+s+"><fieldset>";o+='<legend><label class="swatch-label swatch-label-image '+(this.displayLabel(e)?"":"star-hide")+'">\n            <input type="checkbox" name="'+this.cvt2HTMLEntities(i.name)+'" value="true" checked="checked" />\n            <span class="swatch-option-name">'+i.name+"</span>\n            "+(e.params.display_variant_label?'<span class="swatch-variant-name"></span>':"")+"\n            </label></legend>","swatch-view-slide"==n&&(o+='<div class="swatch-navigable-wrapper">',o+='<div class="swatch-navigable">',o+=this.getSwatchSlideStyleHTML("left"));var l="tooltip"==e.params.option_value_display,c=this.isInstanceTypeCollection()?"32px":"80px",u=this.isInstanceTypeCollection()?"32px":"80px";o+='<ul class="swatch-view swatch-view-image'+(l?" swatch-with-tooltip":"")+" "+this.displayAlignment(n)+'" role="radiogroup">';for(var d=e.params.width||e.params.swatch_size||c,p=e.params.height||e.params.swatch_size||u,h=0;h<i.data.length;h++){var g=this.cvt2HTMLEntities(i.data[h].value),v=g,f=1==i.data[h].available;this.isValueMorphed()&&(v=this.cvt2HTMLEntities(i.data[h].original_value));var m=r&&i.data[h].selected;if(!("invisible"==e.params.stock_out_type&&0!=i.available_count&&!f)||m){o+='<li class="swatch-view-item'+(f?"":" swatch-item-unavailable")+'" orig-value="'+g+'" aria-label="'+g+(f?"":" - Sold Out")+'" role="radio" '+(r&&i.data[h].selected?'aria-checked="true"':'aria-checked="false"')+' tabindex="0">',o+='<div class="swatch-image '+(r?"swatch-group-selector":"swatch-selector")+'" type="image" data-value="'+v+'" orig-value="'+g+'" '+(r?'swatch-url="'+i.data[h].url+'" ':"")+'swatch-option="'+t+'"'+(r&&i.data[h].selected?' current-product="true"':"")+">";var _=this.defaultFeaturedImage,y=i.data[h].featured_image;y!=undefined&&(_=this.getImageSrc(y,e.products_swatch,e.collections_swatch));var w=_&&"none"!=_;w&&(M("Requested background image with URL("+_+")"),_=this.getLazyResolution(_,[d,p],e.params.background_size,e.params.background_position)),o+='<div style="width:'+d+";height:"+p+";background-image:url("+_+');" class="star-set-image" swatch-inside="true">',o+='<i class="hidden"></i></div>';var b="adjacent"==e.params.option_value_display;if(o+='<div class="'+(b?"swatch-img-text-adjacent":"swatch-img-text")+(!b&&w?" swatch-img-text-hidden":"")+'" swatch-inside="true"><p swatch-inside="true">'+v+"</p></div>",e.params.price_badge){var S=!!e.params.price_badge.price_enabled;(!r||r&&1==i.show_price)&&(o+='<div class="'+(S?"swatch-price-adjacent":"swatch-price-hidden")+'" swatch-inside="true"><span swatch-inside="true">'+i.data[h].price+"</span></div>")}o+="</div>",l&&(o+='<div class="swatch-tool-tip">\n                <span class="swatch-tool-tip-text">'+v+'</span>\n                </div>\n                <div class="swatch-tool-tip-pointer"></div>'),o+="</li>"}}return o+="</ul>","swatch-view-slide"==n&&(o+=this.getSwatchSlideStyleHTML("right"),o+="</div></div>"),o+="</fieldset></div>"}},{key:"generateChecksum",value:function(e){var t=e.length,i=undefined,a="";if(0===t)return 0;for(e=e.replace(new RegExp("\n\ts"),""),i=0;i<t;i++)a+=e.charCodeAt(i)+"";return a}},{key:"getSwatchImageURL",value:function(e,t){for(var i=[{char:"!",replacer:"~21"},{char:"*",replacer:"~2A"},{char:"'",replacer:"~92"},{char:"(",replacer:"~28"},{char:")",replacer:"~29"},{char:";",replacer:"~3B"},{char:":",replacer:"~3A"},{char:"@",replacer:"~40"},{char:"&",replacer:"~26"},{char:"=",replacer:"~3D"},{char:"+",replacer:"~2B"},{char:"$",replacer:"~24"},{char:",",replacer:"~2C"},{char:"/",replacer:"~2F"},{char:"\\",replacer:"~5C"},{char:"?",replacer:"~3F"},{char:"%",replacer:"~25"},{char:"#",replacer:"~23"},{char:"[",replacer:"~5B"},{char:"]",replacer:"~5D"},{char:"{",replacer:"~7B"},{char:"}",replacer:"~7D"},{char:'"',replacer:"~22"},{char:"<",replacer:"~3C"},{char:">",replacer:"~3E"},{char:"|",replacer:"~7C"},{char:"`",replacer:"~60"},{char:"^",replacer:"~5E"},{char:".",replacer:"~2E"}],a=0;a<i.length;a++){var n=i[a];e=e.replace(RegExp("\\"+n.char,"gi"),n.replacer),t=t.replace(RegExp("\\"+n.char,"gi"),n.replacer)}return e=encodeURIComponent(e),t=encodeURIComponent(t),"cdn"==this.clientSpecs.getSwatchUrlSource()&&(e=encodeURIComponent(e),t=encodeURIComponent(t)),"https://"+this.clientSpecs.getSwatchUrlHost()+"/apps/"+this.swatchDir+"/"+this.storeSlug+"/swatches/"+e+"/"+t+".media"}},{key:"getCustomImageView",value:function(e,t,i){var a=window.matchMedia?window.matchMedia("screen and (max-width: 480px)"):screen.width<=480,n="swatch-view-"+e.params.swatch_style;a.matches&&(n="swatch-view-"+e.params.mobile_swatch_style);var r="undefined"!=typeof i.product_group_index,s=r?'data-group-index="'+i.product_group_index+'"':"",o='<div class="swatch-single swatch-preset-'+e.id+" "+n+'" '+s+"><fieldset>";o+='<legend><label class="swatch-label swatch-label-custom-image '+(this.displayLabel(e)?"":"star-hide")+'">\n            <input type="checkbox" name="'+this.cvt2HTMLEntities(i.name)+'" value="true" checked="checked" />\n            <span class="swatch-option-name">'+i.name+"</span>\n            "+(e.params.display_variant_label?'<span class="swatch-variant-name"></span>':"")+"\n            </label></legend>","swatch-view-slide"==n&&(o+='<div class="swatch-navigable-wrapper">',o+='<div class="swatch-navigable">',o+=this.getSwatchSlideStyleHTML("left"));var l="tooltip"==e.params.option_value_display,c=this.isInstanceTypeCollection()?"32px":"80px",u=this.isInstanceTypeCollection()?"32px":"80px";o+='<ul class="swatch-view swatch-view-custom-image'+(l?" swatch-with-tooltip":"")+" "+this.displayAlignment(n)+'" role="radiogroup">';for(var d=e.params.width||e.params.swatch_size||c,p=e.params.height||e.params.swatch_size||u,h=0;h<i.data.length;h++){var g=i.data[h].value,v=this.cvt2HTMLEntities(g),f=v,m=1==i.data[h].available;this.isValueMorphed()&&(g=i.data[h].original_value,f=this.cvt2HTMLEntities(g));var _=r&&i.data[h].selected;if(!("invisible"==e.params.stock_out_type&&0!=i.available_count&&!m)||_){o+='<li class="swatch-view-item'+(m?"":" swatch-item-unavailable")+'" orig-value="'+v+'" aria-label="'+v+(m?"":" - Sold Out")+'" role="radio" '+(r&&i.data[h].selected?'aria-checked="true"':'aria-checked="false"')+' tabindex="0">',o+='<div class="swatch-custom-image '+(r?"swatch-group-selector":"swatch-selector")+'" type="image" data-value="'+f+'" orig-value="'+v+'" '+(r?'swatch-url="'+i.data[h].url+'" ':"")+'swatch-option="'+t+'"'+(r&&i.data[h].selected?' current-product="true"':"")+">";var y=null;if(r)r&&(y=this.getLazyResolution(i.data[h].featured_image.src,[d,p],e.params.background_size,e.params.background_position));else{var w=i.untranslated_name?i.untranslated_name:i.name,b=i.data[h].untranslated_value?i.data[h].untranslated_value:g;y=this.getSwatchImageURL(w,b)}if(o+='<div style="width:'+d+";height:"+p+";background-image: url("+y+');" class="star-set-image" swatch-inside="true">',o+='<i class="hidden"></i></div>',o+='<div class="'+("adjacent"==e.params.option_value_display?"swatch-img-text-adjacent":"swatch-img-text swatch-img-text-hidden")+'" swatch-inside="true"><p swatch-inside="true">'+f+"</p></div>",e.params.price_badge){var S=!!e.params.price_badge.price_enabled;(!r||r&&1==i.show_price)&&(o+='<div class="'+(S?"swatch-price-adjacent":"swatch-price-hidden")+'" swatch-inside="true"><span swatch-inside="true">'+i.data[h].price+"</span></div>")}o+="</div>",l&&(o+='<div class="swatch-tool-tip">\n                <span class="swatch-tool-tip-text">'+f+'</span>\n                </div>\n                <div class="swatch-tool-tip-pointer"></div>'),o+="</li>"}}return o+="</ul>","swatch-view-slide"==n&&(o+=this.getSwatchSlideStyleHTML("right"),o+="</div></div>"),o+="</fieldset></div>"}},{key:"getButtonView",value:function(e,t,i){var a="undefined"!=typeof i.product_group_index,n=a?' data-group-index="'+i.product_group_index+'"':"",r=window.matchMedia?window.matchMedia("screen and (max-width: 480px)"):screen.width<=480,s="swatch-view-"+e.params.button_style;r.matches&&(s="swatch-view-"+e.params.mobile_button_style);var o='<div class="swatch-single swatch-preset-'+e.id+" "+s+'"'+n+"><fieldset>";o+='<legend><label class="swatch-label swatch-label-button '+(this.displayLabel()?"":"star-hide")+'">\n            <input type="checkbox" name="'+this.cvt2HTMLEntities(i.name)+'" value="true" checked="checked" />\n            <span class="swatch-option-name">'+i.name+"</span>"+(e.params.display_variant_label?'<span class="swatch-variant-name"></span>':"")+"\n            </label></legend>","swatch-view-slide"==s&&(o+='<div class="swatch-navigable-wrapper">',o+='<div class="swatch-navigable">',o+=this.getSwatchSlideStyleHTML("left")),o+='<ul class="swatch-view swatch-view-button '+this.displayAlignment(s)+'" role="radiogroup">';for(var l=0;l<i.data.length;l++){var c=this.cvt2HTMLEntities(i.data[l].value),u=c,d=1==i.data[l].available;this.isValueMorphed()&&(u=this.cvt2HTMLEntities(i.data[l].original_value));var p=a&&i.data[l].selected;if(!("invisible"==e.params.stock_out_type&&0!=i.available_count&&!d)||p){if(o+='<li class="swatch-view-item'+(d?"":" swatch-item-unavailable")+'" orig-value="'+c+'" aria-label="'+c+(d?"":" - Sold Out")+'" role="radio" '+(a&&i.data[l].selected?'aria-checked="true"':'aria-checked="false"')+' tabindex="0">',o+='<div class="swatch-button '+(a?"swatch-group-selector":"swatch-selector")+' star-set-btn" swatch-option="'+t+'" type="swatch-button" '+(a?'swatch-url="'+i.data[l].url+'" ':"")+'data-value="'+u+'" orig-value="'+c+'"'+(a&&i.data[l].selected?' current-product="true"':"")+">",o+='<div class="swatch-button-title-text" swatch-inside="true"><span swatch-inside="true">'+u+"</span></div>",e.params.price_badge){var h=!!e.params.price_badge.price_enabled;(!a||a&&1==i.show_price)&&(o+='<div swatch-inside="true" class="'+(h?"swatch-price-adjacent swatch-button-price":"swatch-button-price-hidden")+'"><span swatch-inside="true">'+i.data[l].price+"</span></div>")}o+="</div>",o+="</li>"}}return o+="</ul>","swatch-view-slide"==s&&(o+=this.getSwatchSlideStyleHTML("right"),o+="</div></div>"),o+="</fieldset></div>"}},{key:"getDropDownView",value:function(e,t,i){var a="undefined"!=typeof i.product_group_index,n=a?' data-group-index="'+i.product_group_index+'"':"",r='<div class="swatch-single swatch-preset-'+e.id+' swatch-view-stack"'+n+"><fieldset>";"default"==e.params.dropdown_type&&(r+='<legend><label class="swatch-label swatch-label-drop-down '+(this.displayLabel()?"":"star-hide")+'">\n            <input type="checkbox" name="'+this.cvt2HTMLEntities(i.name)+'" value="true" checked="checked" />\n            <span>'+i.name+'<span className="label-seperator">'+e.params.seperator+"</span></span></label></legend>");r+='<div class="swatch-drop-down-wrapper '+this.displayAlignment()+'">',r+='<div class="swatch-drop-down-inner '+("label_inside"==e.params.dropdown_type?"swatch-drop-down-label":"")+'">',"label_inside"==e.params.dropdown_type&&(r+='<div class="swatch-label-inside"><legend><label class="swatch-label swatch-label-drop-down">\n            <input type="checkbox" name="'+this.cvt2HTMLEntities(i.name)+'" value="true" checked="checked" />\n            <span>'+i.name+'<span className="label-seperator">'+e.params.seperator+"</span></span></label></legend></div>"),r+='<select class="swatch-view '+(a?"swatch-group-selector":"swatch-selector")+' swatch-drop-down" '+(a?'swatch-url="true" ':"")+'swatch-option="'+t+'" tabindex="0">';for(var s=0;s<i.data.length;s++){var o=this.cvt2HTMLEntities(i.data[s].value),l=o,c=1==i.data[s].available;this.isValueMorphed()&&(l=this.cvt2HTMLEntities(i.data[s].original_value));var u=a&&i.data[s].selected
;"invisible"==e.params.stock_out_type&&0!=i.available_count&&!c&&!u||(r+='<option value="'+(a?i.data[s].url:o)+'"'+(a&&i.data[s].selected?' selected="selected"':"")+">",r+=l,r+="</option>")}return r+="</select>",r+="double_triangle"==e.params.icon_style?'<svg viewBox="0 0 20 20" class="swatch-drop-down-svg"><path d="M7.676 9h4.648c.563 0 .879-.603.53-1.014l-2.323-2.746a.708.708 0 0 0-1.062 0l-2.324 2.746c-.347.411-.032 1.014.531 1.014Zm4.648 2h-4.648c-.563 0-.878.603-.53 1.014l2.323 2.746c.27.32.792.32 1.062 0l2.323-2.746c.349-.411.033-1.014-.53-1.014Z"></path></svg>':"inverted_triangle"==e.params.icon_style?'<svg class="swatch-drop-down-svg" viewBox="0 0 20 20"><path d="m5 8 5 5 5-5H5z"></path></svg>':'<svg class="swatch-drop-down-svg" focusable="false" viewBox="0 0 24 24"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg>',r+="</div>",r+="</div>",r+="</fieldset></div>"}},{key:"getDropDownViewCustom",value:function(e,t,i){var a="undefined"!=typeof i.product_group_index,n=a?' data-group-index="'+i.product_group_index+'"':"",r='<div class="swatch-single swatch-preset-'+e.id+' swatch-view-stack"'+n+"><fieldset>",s="",o="";r+='<legend><label class="swatch-label swatch-label-drop-down '+(this.displayLabel()?"":"star-hide")+'">\n        <input type="checkbox" name="'+this.cvt2HTMLEntities(i.name)+'" value="true" checked="checked" />'+i.name+"</label></legend>";var l=e[this.instanceType+"_swatch"],c=this.isInstanceTypeCollection()?"24px":"48px",u=this.isInstanceTypeCollection()?"24px":"48px",d=e.params.swatch_size||c,p=e.params.swatch_size||u;r+='<div class="swatch-drop-down-wrapper '+this.displayAlignment()+' swatch-drop-down-custom">',r+='<div class="swatch-drop-down-inner">',r+='<div type="select" class="swatch-view swatch-drop-down" swatch-option="'+t+'" aria-label="{{ option_value_text }}" aria-haspopup="listbox" aria-expanded="false" tabindex="0">{{ option_value }}</div>',r+='<ul class="swatch-drop-down-list" role="listbox">';for(var h=0;h<i.data.length;h++){var g=i.data[h].value,v=this.cvt2HTMLEntities(g),f=v,m=1==i.data[h].available;this.isValueMorphed()&&(g=i.data[h].original_value,f=this.cvt2HTMLEntities(g));var _=a&&i.data[h].selected;if(!("invisible"==e.params.stock_out_type&&0!=i.available_count&&!m)||_){var y=null;if("custom_swatch"!=l||a)if("custom_swatch"==l&&a)y=i.data[h].featured_image.src;else{y=this.defaultFeaturedImage;var w=i.data[h].featured_image;w!=undefined&&(y=this.getImageSrc(w,e.products_swatch,e.collections_swatch)),""!=y&&"none"!=y&&"null"!=y&&"undefined"!=y&&(y=this.getLazyResolution(y,[d,p],e.params.background_size,e.params.background_position))}else{var b=i.untranslated_name?i.untranslated_name:i.name,S=i.data[h].untranslated_value?i.data[h].untranslated_value:g;y=this.getSwatchImageURL(b,S)}var k='<div style="width:'+d+";height:"+p+";background-image:url("+y+');" class="star-set-image" swatch-inside="true"><i class="hidden"></i></div>';f.length>s.length&&(o=k+'<span swatch-inside="true">'+(s=f)+"</span>"),r+='<li type="select_value" class="'+(a?"swatch-group-selector":"swatch-selector")+" swatch-drop-down-list-item"+(m?"":" swatch-item-unavailable")+'" orig-value="'+v+'" '+(a?'swatch-url="'+i.data[h].url+'" ':"")+'swatch-option="'+t+'"'+(a&&i.data[h].selected?' current-product="true"':"")+' aria-label="'+v+(m?"":" - Sold Out")+'" role="option" '+(a&&i.data[h].selected?'aria-selected="true"':'aria-selected="false"')+' tabindex="0">',r+=k,r+='<span swatch-inside="true">'+f+"</span>",r+="</li>"}}return r+="</ul>",r+='<svg class="swatch-drop-down-svg" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 129 129"><g><path d="m121.3,34.6c-1.6-1.6-4.2-1.6-5.8,0l-51,51.1-51.1-51.1c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l53.9,53.9c0.8,0.8 1.8,1.2 2.9,1.2 1,0 2.1-0.4 2.9-1.2l53.9-53.9c1.7-1.6 1.7-4.2 0.1-5.8z"/></g></svg>',r+="</div>",r+="</div>",r=(r=(r+="</fieldset></div>").replace("{{ option_value_text }}",s)).replace("{{ option_value }}",o)}},{key:"getHiddenView",value:function(e,t,i){for(var a="",n=0;n<i.data.length;n++){var r=i.data[n].value,s=this.cvt2HTMLEntities(r),o=!!i.data[n].available;if((""==a||o)&&(a='<div class="swatch-single swatch-view-stack">\n                    <input type="hidden" class="swatch-selector" value="'+s+'" swatch-option="'+t+'" orig-value="'+s+'" />\n                </div>',o))break}return a}},{key:"selectSwatch",value:function(e,t,i){var a="swatch-selected";if("undefined"!=typeof this.selectedSwatches[e]){var n,r=this.selectedSwatches[e];if(r.classList.remove(a),r.removeAttribute("current-product"),"SELECT"!=r.tagName)if(n="LI"==r.tagName?r:r.closest("li.swatch-view-item"))"option"==n.getAttribute("role")?n.setAttribute("aria-selected",!1):n.setAttribute("aria-checked",!1)}(this.isDropDown(t.tagName)&&(t.value=i),t.classList.add(a),"SELECT"!=t.tagName)&&((n="LI"==t.tagName?t:t.closest("li.swatch-view-item"))&&("option"==n.getAttribute("role")?n.setAttribute("aria-selected",!0):n.setAttribute("aria-checked",!0)));this.selectedSwatches[e]=t}},{key:"isDropDown",value:function(e){return"SELECT"==e}},{key:"getIsSwatchRootDisplayed",value:function(){var e=arguments.length<=0||arguments[0]===undefined?"options":arguments[0];return this.isSwatchRootDisplayed[e]}},{key:"setIsSwatchRootDisplayed",value:function(e){var t=arguments.length<=1||arguments[1]===undefined?"options":arguments[1];this.isSwatchRootDisplayed[t]=e}}]),e}(),M=function(e){if(u&&u.getDisplayLogs()){var t=Date(Date.now());console.log("<-------------- START ---------------->"),console.log("Swatch King:",e),console.log("Swatch King:","Timestamp",t.toString()),console.log("<--------------- END ----------------->")}},P=function(e){var t=document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t.body.children},q=function(){var e=null,t={};if(document.location.search.substr(1).split("&").forEach(function(e){var i=e.split("=");try{t[i[0].toString()]=i[1].toString()}catch(a){}}),isNaN(t.variant)){var i=undefined;(i=document.querySelector('[name="id"]'))&&(e=i.value)}else t.variant&&(e=t.variant);return e},R=function(e){clearInterval(parseInt(e)),M(["Interval Removed...",e])},V=function(){return"complete"===document.readyState||"loaded"===document.readyState},F=function(){if(s("VariantSwatchKing")){if(t(),!y)return;(b||k||I||C)&&(H(),document.addEventListener("vsk:product:refresh",function(){setTimeout(function(){H(),M("Refreshing product swatch lookup complete.")},0)})),(S||A||T||E)&&j()}},H=(setInterval(function(){F()},500),function G(){u||(u=new L);var e=u.getSelectors().swatch_root;e.use_section_as_root?function(){var t=!1,i=document.querySelectorAll(e.section_selector);if(!h){var a=window.location.pathname.includes("/products");t=1==i.length&&a}Object.entries(i).forEach(function(e){var i=_slicedToArray(e,2),a=i[0],n=i[1];if("length"!=a&&"undefined"==typeof n.vsk_initialized){n.vsk_initialized=!0,n.setAttribute("swatch-generated",!0);var r={instance_sub_type:"sectioned"};t&&(r.primary=!0,h=!0),new D("products",n,r).onInstanceActivate()}});var n=V()?1e3:250;setTimeout(G.bind(_this21),n)}():new D("products",document,null).onInstanceActivate()}),j=function(){u||(u=new L);var e=u.getCollectionConfig(),t=u.getCollectionSettings();U(e,t,!0),document.addEventListener("vsk:render:swatches",function(){setTimeout(function(){U(e,t,!1)},0)})},U=function W(e,t,i){var a=document.querySelectorAll(e.swatch_root_selector);Object.entries(a).forEach(function(e){var t=_slicedToArray(e,2),i=t[0],a=t[1];"length"!=i&&("undefined"==typeof a.vsk_initialized&&(a.vsk_initialized=!0,a.setAttribute("swatch-generated","none"),new D("collections",a,null).initialize()))}),i&&t.continuous_lookup>0&&setTimeout(function(){W(e,t,!0)},t.continuous_lookup)}}();